import{r as t,c as s,f as i,h as e,H as o,g as r}from"./p-c66bef8d.js";import{a as h}from"./p-dc250dcd.js";import{D as a}from"./p-2191fe4f.js";import{c as n}from"./p-e0194d22.js";import{P as l}from"./p-602d2bf7.js";import{o as d}from"./p-90458c1b.js";function c(t,s){if(s&&s.includes("$"))try{const i=s.match(/(.*)(\$\d)(.*)/),e=parseInt(i[2].substring(1)),o=t.toFixed(e).replace(".",",");return i[1]+o+i[3]}catch(i){throw new Error("Error formatting value '"+t+"' with pattern '"+s+"'.")}return null==t?void 0:t.toString()}const p=class{constructor(i){t(this,i),this.valueChange=s(this,"valueChange",7),this.ticksOfKeyDown=0,this.step=.01,this.showminmaxlabel=!1,this.showvaluelabel=!0,this.formattingpattern="$0",this.readonly=!1,this.disabled=!1}valueChanged(){null!=this.value&&isNaN(this.value)&&(console.error("<dx-slider> has an invalid value set for property 'value'."),this.value=null)}componentDidRender(){d((()=>this.updatePosition()))}componentWillLoad(){this.dragController=new a((()=>this.value),(t=>{const s=this.lineElement.getBoundingClientRect(),i=s.left,e=Math.max(0,Math.min((t.x-i)/(s.right-i),1));this.applyNewValue(e)}))}connectedCallback(){this.resizeObserver=new ResizeObserver((()=>i(this))),this.resizeObserver.observe(this.self)}disconnectedCallback(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect()}updatePosition(){const t=this.lineElement.offsetWidth,s=(t-u)*this.relativeValue;this.knobElement.style.transform=`translateX(${s}px)`,this.showvaluelabel&&this.updateValueLabelPosition(t),this.showminmaxlabel&&this.updateMinMaxLabelVisibility(s)}updateValueLabelPosition(t){const s=this.labelTextElement.offsetWidth;this.valueElement.style.transform=`translateX(${n((t-u)*this.relativeValue-s/2+u/2,0,Math.max(0,t-s))}px)`}updateMinMaxLabelVisibility(t){const s=this.minLabelElement.getBoundingClientRect(),i=this.maxLabelElement.getBoundingClientRect(),e=s.left+t,o=e+u;new l(this.minLabelElement).set("visible",e>s.right).execute(),new l(this.maxLabelElement).set("visible",o<i.left).execute(),this.minLabelElement.classList.contains("animated")||d((()=>{this.minLabelElement.classList.add("animated"),this.maxLabelElement.classList.add("animated")}))}clickOnSlider(t){const s=this.lineElement.getBoundingClientRect(),i=s.left+.5*u,e=n((t.clientX-i)/(s.right-.5*u-i),0,1);this.applyNewValue(e)}applyNewValue(t){this.value=function(t,s,i,e){var o;const r=Math.round((s+t*(i-s))/e)*e,h=(null===(o=e.toString().split(".")[1])||void 0===o?void 0:o.length)||0;return parseFloat(r.toFixed(h))}(t,this.min,this.max,this.step),this.valueChange.emit(this.value)}eventCanControlValueByKey(t){return!(this.readonly||this.disabled||"ArrowLeft"!==t.key&&"ArrowRight"!==t.key)}keyDownOnSlider(t){if(!this.eventCanControlValueByKey(t))return;this.ticksOfKeyDown++;const s=("ArrowLeft"===t.key?-1:1)*(t.shiftKey?(this.max-this.min)/10:this.step*Math.pow(10,Math.floor(this.ticksOfKeyDown/10))),i=n((this.value+s-this.min)/(this.max-this.min),0,1);this.applyNewValue(i),t.preventDefault()}keyUpOnSlider(t){this.eventCanControlValueByKey(t)&&(this.ticksOfKeyDown=0,t.preventDefault())}checkAsserts(){h(null!=this.min,(()=>"<dx-slider> requires the property 'min'")),h(null!=this.max,(()=>"<dx-slider> requires the property 'max'")),h(this.min<this.max,(()=>"<dx-slider> requires 'min' to be lower then 'max'")),h(this.value>=this.min&&this.value<=this.max,(()=>"<dx-slider> requires 'value' to be between 'min' and 'max'"))}get usedValue(){return n(this.value,this.min,this.max)}get relativeValue(){return(this.usedValue-this.min)/(this.max-this.min)}renderLabel(){var t;if((null===(t=this.label)||void 0===t?void 0:t.length)>0)return e("div",{class:"label"},e("dx-text",{type:"Infotext-Standard",color:"headline"},this.label))}renderMinMaxLabels(){if(this.showminmaxlabel)return e("div",{class:"min-max-labels"},e("dx-text",{type:"Infotext-Small",color:"tags",ref:t=>this.minLabelElement=t},c(this.min,this.formattingpattern)),e("dx-text",{type:"Infotext-Small",color:"tags",ref:t=>this.maxLabelElement=t},c(this.max,this.formattingpattern)))}renderValue(){if(this.showvaluelabel)return e("div",{class:"value",ref:t=>this.valueElement=t},e("dx-text",{type:"Paragraph-Big",color:"headline",ref:t=>this.labelTextElement=t},c(this.usedValue,this.formattingpattern)))}render(){this.checkAsserts();const t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return e(o,{class:{readonly:this.readonly,disabled:this.disabled,"is-safari":t},tabIndex:0,onKeyDown:t=>this.keyDownOnSlider(t),onKeyUp:t=>this.keyUpOnSlider(t)},this.renderValue(),e("div",{class:"slider",onClick:t=>this.clickOnSlider(t)},e("div",{class:"line",ref:t=>this.lineElement=t},e("div",{class:"filled",style:{transform:`scaleX(${this.relativeValue})`}})),this.renderMinMaxLabels(),e("div",{class:"knob",ref:t=>this.knobElement=t,onClick:t=>t.stopPropagation(),onPointerDown:t=>this.dragController.onPointerDown(t),onTouchStart:t=>this.dragController.onTouchStart(t)})),this.renderLabel(),e("div",{class:"keyboard-focus"}))}get self(){return r(this)}static get watchers(){return{value:["valueChanged"]}}},u=40;p.style=":host{display:flex;flex-direction:column}:host:host([hidden]){display:none !important}:host:host(:focus-visible){outline:2px solid #004763}:host:host(.is-safari:focus){outline:none}:host .value{flex-shrink:0;white-space:nowrap;width:max-content;margin-bottom:4px}:host .slider{height:40px;display:flex;align-items:center;cursor:pointer;position:relative}:host .slider .line{flex-shrink:0;width:100%;height:2px;background:#d6d6d6}:host .slider .line .filled{width:100%;height:100%;background:#337a96;transform-origin:left center}:host .slider .min-max-labels{position:absolute;top:0;width:100%;display:flex;justify-content:space-between;white-space:nowrap}:host .slider .min-max-labels dx-text{opacity:0}:host .slider .min-max-labels dx-text.visible{opacity:1}:host .slider .min-max-labels dx-text.animated{transition:opacity 150ms ease-in-out}:host .slider .knob{position:absolute;top:0;left:0;width:40px;height:40px;border-radius:50%;box-sizing:border-box;border:2px solid #337a96;background:#ffffff}:host .label{margin-top:8px;white-space:nowrap}:host:host(.readonly){pointer-events:none}:host:host(.readonly) .value{transform:none !important;margin-bottom:8px}:host:host(.readonly) .slider{height:auto}:host:host(.readonly) .slider .knob{display:none}:host:host(.disabled){pointer-events:none;user-select:none;opacity:0.4}";export{p as dx_slider}
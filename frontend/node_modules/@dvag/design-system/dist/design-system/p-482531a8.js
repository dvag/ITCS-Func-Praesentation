import{D as e}from"./p-00a889bb.js";import{V as t}from"./p-15b13381.js";class r{constructor(){this.headerSubject=new e,this.headerHeightSubject=new e,this.contentHeightBelowHeaderSubject=new e,this.reservedAdditionalHeightBelowHeader=new Map}static instance(){return t.instance().getOrPut("ds-header-service",(()=>new r))}get header$(){return this.headerSubject}get header(){return this.headerSubject.value}set header(e){var t;if(this.headerSubject.value!==e){if(this.headerSubject.next(e),null==e)return void(null===(t=this.headerResizeObserver)||void 0===t||t.disconnect());this.headerResizeObserver=new ResizeObserver((()=>{this.delegateHeightChange()})),this.headerResizeObserver.observe(e)}}get headerHeight$(){return this.headerHeightSubject}get headerHeight(){var e;return null!==(e=this.headerHeightSubject.value)&&void 0!==e?e:0}get contentHeightBelowHeader$(){return this.contentHeightBelowHeaderSubject}get contentHeightBelowHeader(){var e;return null!==(e=this.contentHeightBelowHeaderSubject.value)&&void 0!==e?e:0}delegateHeightChange(){this.headerHeightSubject.next(this.headerSubject.value.offsetHeight)}reserveHeightFor(e,t){this.reservedAdditionalHeightBelowHeader.get(e)!==t&&(this.reservedAdditionalHeightBelowHeader.set(e,t),this.delegateContentHeightBelowHeader())}freeHeightFor(e){this.reservedAdditionalHeightBelowHeader.delete(e)&&this.delegateContentHeightBelowHeader()}delegateContentHeightBelowHeader(){const e=Array.from(this.reservedAdditionalHeightBelowHeader).reduce(((e,t)=>e+t[1]),0);this.contentHeightBelowHeaderSubject.next(e)}}function i(e){return r.instance().headerHeight$.subscribe((t=>e(t)))}function s(e){return r.instance().contentHeightBelowHeader$.subscribe((t=>e(t)))}export{r as H,s as a,i as s}
class t{constructor(t,i,s=(()=>{}),h=(()=>{})){this.startDragValueProvider=t,this.onUpdate=i,this.onStartDrag=s,this.onStopDrag=h}onPointerDown(t){var i;"touch"!==t.pointerType&&(this.usePointer=t.pointerId,this.startX=t.clientX,this.startY=t.clientY,this.startValue=this.startDragValueProvider(this.startX,this.startY),this.fireUpdate(t.clientX,t.clientY),this.moveListener=t=>{this.usePointer==t.pointerId&&this.fireUpdate(t.clientX,t.clientY)},this.upListener=t=>{this.usePointer==t.pointerId&&(window.removeEventListener("pointermove",this.moveListener),window.removeEventListener("pointerup",this.upListener),this.onStopDrag(),""!==this.startBodyUserSelect?(document.body.style.userSelect=this.startBodyUserSelect,document.body.style.webkitUserSelect=this.startBodyUserSelect):(document.body.style.removeProperty("user-select"),document.body.style.removeProperty("-webkit-user-select")))},window.addEventListener("pointermove",this.moveListener),window.addEventListener("pointerup",this.upListener),this.onStartDrag(),this.startBodyUserSelect=null!==(i=document.body.style.userSelect)&&void 0!==i?i:document.body.style.webkitUserSelect,document.body.style.userSelect="none",document.body.style.webkitUserSelect="none")}fireUpdate(t,i){this.onUpdate({startValue:this.startValue,startX:this.startX,startY:this.startY,x:t,y:i})}onTouchStart(t){t.touches.length>1||(t.preventDefault(),this.touchIdentifier=t.touches[0].identifier,this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY,this.startValue=this.startDragValueProvider(this.startX,this.startY),this.fireUpdate(t.touches[0].clientX,t.touches[0].clientY),this.moveListener=i=>{t.preventDefault();const s=Array.from(i.touches).filter((t=>t.identifier===this.touchIdentifier))[0];s&&this.fireUpdate(s.clientX,s.clientY)},this.upListener=i=>{t.preventDefault(),(Array.from(i.changedTouches).filter((t=>t.identifier===this.touchIdentifier))[0]||0===i.touches.length)&&(window.removeEventListener("touchmove",this.moveListener),window.removeEventListener("touchend",this.upListener),this.onStopDrag())},window.addEventListener("touchmove",this.moveListener),window.addEventListener("touchend",this.upListener),this.onStartDrag())}}export{t as D}
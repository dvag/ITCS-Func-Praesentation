import{r as t,h as e,H as i,g as s}from"./p-c66bef8d.js";import{a as n}from"./p-dc250dcd.js";import{D as a}from"./p-31a88832.js";import{E as o}from"./p-70f48e14.js";import{a as r}from"./p-aa0a06c6.js";import{o as h}from"./p-90458c1b.js";import{S as l}from"./p-968cb048.js";import{D as d}from"./p-515e1a3a.js";import{e as c}from"./p-bb7a30ab.js";import"./p-15b13381.js";import"./p-fabbcf47.js";const p=class{constructor(e){t(this,e),this.errors={from:d.NO_ERROR,to:d.NO_ERROR},this.currentlyFocused=!1,this.internalErrorMessage="",this.mode="day-month-year",this.value=null,this.onFocus=()=>this.currentlyFocused=!0,this.onBlur=()=>this.handleBlur(),this.onError=t=>this.handleError(t),this.onDateValueChange=t=>this.handleDateValueChange(t)}onValueChange(){const t=c(this.value);this.selectRange(t)}connectedCallback(){this.slotObserver=new l(this.self,"dx-date-input",(t=>{n(2===t.length,(()=>"You have to define exactly two dx-date-inputs within this component"));const e={from:null,to:null};t.forEach((t=>{t.removeEventListener("focus",this.onFocus),t.addEventListener("focus",this.onFocus),t.removeEventListener("blur",this.onBlur),t.addEventListener("blur",this.onBlur),t.removeEventListener("errorFound",this.onError),t.addEventListener("errorFound",this.onError),t.removeEventListener("valueChange",this.onDateValueChange),t.addEventListener("valueChange",this.onDateValueChange),t.min=this.min,t.max=this.max,t.mode=this.mode,t.calendarenabled=!1,e[t.slot]=a.stringToDate(t.value)})),this.selectRange(null!=this.value?c(this.value):e)}))}componentDidLoad(){this.updateCalendarValue()}disconnectedCallback(){this.slotObserver.disconnect()}onSegmentBlurred(){this.updateCalendarValue()}async focusControl(){var t;null===(t=this.self.querySelector("dx-date-input"))||void 0===t||t.focusControl()}handleBlur(){h((()=>{!r(this.self)&&!Array.from(this.self.querySelectorAll("dx-date-input[slot]")).some((t=>r(t)))&&(this.currentlyFocused=!1)}))}handleError(t){this.errors[t.target.slot]=t.detail.type,this.internalErrorMessage={[d.INVALID_DATE]:()=>"Invalides Datum gefunden!",[d.UNDER_MIN]:()=>`Die eingegeben Daten müssen nach dem ${a.getFormattedDisplayDate(this.min)} liegen.`,[d.OVER_MAX]:()=>`Die eingegeben Daten müssen vor dem ${a.getFormattedDisplayDate(this.max)} liegen.`,[d.NO_ERROR]:()=>""}[this.errors.from!==d.NO_ERROR?this.errors.from:this.errors.to]()}handleDateValueChange(t){const e=t.target;if(!e.slot)return;const i=c(this.value);i[e.slot]=t.detail?new Date(t.detail):null,this.selectRange(i)}getDateInputs(){return Array.from(this.self.querySelectorAll("dx-date-input"))}selectRange(t,e="other"){var i,s;this.value=`${null!==(i=a.dateToString(t.from))&&void 0!==i?i:""},${null!==(s=a.dateToString(t.to))&&void 0!==s?s:""}`;const n=this.getDateInputs();n[0]&&(n[0].value=a.dateToString(t.from),"calendar-widget"===e&&n[0].internalForceEmitChangeEvent()),n[1]&&(n[1].value=a.dateToString(t.to),"calendar-widget"===e&&n[1].internalForceEmitChangeEvent())}updateCalendarValue(){null!=this.calendar&&(this.calendar.value=this.value)}setCalendar(t){this.calendar!==t&&(this.calendar=t,this.updateCalendarValue())}renderCalendar(){return e("dx-calendar",{slot:"overlay",id:o.createId(this.self,"calendar"),ref:t=>this.setCalendar(t),tabindex:-1,errormessage:this.internalErrorMessage,rangeenabled:!0,onBlur:()=>{this.onBlur()},min:this.min,max:this.max,onRangeSelected:t=>{this.selectRange(t.detail,"calendar-widget")},mode:this.mode})}render(){return e(i,null,e("dx-flyout",{open:this.currentlyFocused,offsety:4},e("div",{class:"date-container"},e("div",{class:"date-input-container"},e("slot",{name:"from"})),e("div",{class:"date-input-container"},e("slot",{name:"to"}))),this.renderCalendar()))}get self(){return s(this)}static get watchers(){return{value:["onValueChange"]}}};p.style=':host{display:block}:host:host([hidden]){display:none !important}:host .date-container{display:flex;align-items:baseline;gap:24px;flex-direction:column;align-items:stretch}@media (min-width: 476px){:host .date-container{flex-direction:row}}:host .date-container .date-input-container{flex:1}:host .date-container .date-input-container:first-child{position:relative}@media (min-width: 476px){:host .date-container .date-input-container ::slotted(*[slot=from]):after{font-family:DVAG-Type, sans-serif;content:"-";display:flex;top:0;right:-24px;width:24px;height:100%;align-items:center;justify-content:center;position:absolute}}:host .date-container .date-input-container ::slotted(*[label]):after{top:12px}';export{p as dx_date_range}
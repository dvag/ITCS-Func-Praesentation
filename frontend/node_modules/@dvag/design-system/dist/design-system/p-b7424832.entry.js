import{r as t,c as e,f as i,a as s,w as o,h as n,H as r,g as a}from"./p-c66bef8d.js";import{u as l,s as h}from"./p-372cf900.js";import{B as c}from"./p-76fa4815.js";import{E as d}from"./p-70f48e14.js";import{n as u}from"./p-fabbcf47.js";import{o as p,i as f}from"./p-90458c1b.js";import{c as m}from"./p-968cb048.js";import{s as b,H as g}from"./p-da23ffb1.js";import{S as x}from"./p-c1d7eca2.js";import"./p-15b13381.js";import"./p-00a889bb.js";const v=class{constructor(i){t(this,i),this.navigate=e(this,"navigate",7),this.scopes=[],this.enableScrollSelection=!0,this.menuItems=[],this.openedMenuItemValue=null,this.headerState={isVisible:!0,height:0},this.usesStates=!1,this.smallScreenModalVisible=!1,this.autonavigation=!0,this.titlestring="",this.expandedlayoutat="mq4"}onExpandedLayoutAtChanges(){this.updateLayoutDependentOnCurrentBreakpoint()}connectedCallback(){this.registerMenuItemObserver(),this.breakpointAware=new c((()=>i(this)),!0),this.headerHeightSubscription=b(((t,e)=>{this.headerState={height:t,isVisible:e},this.updateSmallScreenFloatingWrapperPosition()}))}disconnectedCallback(){var t,e,i,s,o;null===(t=this.menuItemObserver)||void 0===t||t.disconnect(),null===(e=this.breakpointAware)||void 0===e||e.disconnect(),null===(i=this.headerHeightSubscription)||void 0===i||i.unsubscribe(),null===(s=this.scopeIntersectionObserver)||void 0===s||s.disconnect(),null===(o=this.smallScreenHeaderIntersectionObserver)||void 0===o||o.disconnect()}onWindowChange(){this.updateLayoutDependentOnCurrentBreakpoint()}updateLayoutDependentOnCurrentBreakpoint(){this.isLargeScreen?this.updateScrollabilityOfScrollContainer():this.updateSmallScreenFloatingWrapperPosition()}async addScope(t){this.scopes=[...this.scopes,t],this.configureIntersectionObserver()}async removeScope(t){this.scopes=this.scopes.filter((e=>e!==t)),this.configureIntersectionObserver()}updateScrollabilityOfScrollContainer(){p((()=>{s((()=>{this.scrollContainerIsScrollable=null!=this.scrollContainerElement&&this.scrollContainerElement.scrollHeight>this.scrollContainerElement.offsetHeight}))}))}configureIntersectionObserver(){var t;null===(t=this.scopeIntersectionObserver)||void 0===t||t.disconnect();const e={};this.scopeIntersectionObserver=new IntersectionObserver((t=>{for(const i of t){const t=i.target.getAttribute("value");e[t]={isIntersecting:i.isIntersecting,target:i.target,value:t,boundingRect:null}}const i=Object.values(e).filter((t=>!!t.isIntersecting&&(t.boundingRect=t.target.getBoundingClientRect(),t.boundingRect.bottom>=(this.headerState.isVisible?this.headerState.height:0))));0!==i.length&&(i.forEach((t=>t.boundingRect=t.target.getBoundingClientRect())),i.reduce(((t,e)=>t.boundingRect.y+t.boundingRect.height/2<e.boundingRect.y+e.boundingRect.height/2?t:e))&&this.selectValueWhileScrolling(i[0].value))}),C([0])),this.scopes.forEach((t=>this.scopeIntersectionObserver.observe(t)))}configureSmallScreenIntersectionObserver(){var t;null!=this.smallScreenTriggerElement&&(null===(t=this.smallScreenHeaderIntersectionObserver)||void 0===t||t.disconnect(),this.smallScreenHeaderIntersectionObserver=new IntersectionObserver((t=>{if(this.isLargeScreen||null==this.floatingWrapperElement)return;clearTimeout(this.fadeOutFloatingWrapperElementTimeout);const e=t[0].intersectionRatio<1;e?(this.floatingWrapperElement.classList.remove("fade-out"),this.floatingWrapperElement.classList.add("visible"),this.updateSmallScreenFloatingWrapperPosition()):e||(this.floatingWrapperElement.classList.add("fade-out"),this.fadeOutFloatingWrapperElementTimeout=setTimeout((()=>{null!=this.floatingWrapperElement&&(this.floatingWrapperElement.classList.remove("fade-out"),this.floatingWrapperElement.classList.remove("visible"))}),200))}),C([0,1])),this.smallScreenHeaderIntersectionObserver.observe(this.smallScreenTriggerElement))}updateSmallScreenFloatingWrapperPosition(){this.floatingWrapperElement&&this.smallScreenTriggerElement&&s((()=>{const t=this.smallScreenTriggerElement.offsetWidth+2;o((()=>{var e;this.floatingWrapperElement&&this.smallScreenTriggerElement&&(this.floatingWrapperElement.style.width=`${t}px`,this.floatingWrapperElement.style.top=`${(null===(e=this.headerState)||void 0===e?void 0:e.isVisible)?this.headerState.height:0}px`)}))}))}selectValueWhileScrolling(t){if(this.lastRequestedSelectionValue=t,this.enableScrollSelection&&this.selectedvalue!==t)for(const e of this.menuItems){if(e.value===t)return this.openedMenuItemValue=e.value,void(this.selectedvalue=e.value);for(const i of null==e?void 0:e.children)if(i.value===t)return this.selectedvalue=i.value,void(this.openedMenuItemValue=e.value)}}registerMenuItemObserver(){this.menuItemObserver=m(this.self,":scope > dx-site-navigation-menu-item.hydrated",(async t=>{this.menuItems=await Promise.all(t.map((async t=>Object.assign(Object.assign({},await t.toMenuItemModel()),{children:await Promise.all(Array.from(t.querySelectorAll(u("dx-site-navigation-menu-item"))).map((t=>t.toMenuItemModel())))})))),this.menuItems=this.menuItems.map((t=>{const e=[t.state];t.children.forEach((t=>e.push(t.state)));const i=e.reduce(((t,e)=>x.indexOf(e)<=x.indexOf(t)?e:t));return Object.assign(Object.assign({},t),{state:i})})),this.usesStates=this.menuItems.some((t=>"none"!==t.state)),this.configureIntersectionObserver()}))}get isLargeScreen(){return"mq3"===this.expandedlayoutat&&this.breakpointAware.mq3||this.breakpointAware.mq4||this.breakpointAware.mq5}openCloseItem(t){this.openedMenuItemValue=this.openedMenuItemValue!==t.value?t.value:null}clickOnItem(t){var e;if(this.selectedvalue=t.value,void 0!==t.children){const i=(null===(e=t.children)||void 0===e?void 0:e.length)>0;this.openedMenuItemValue=i?t.value:null}this.autonavigation&&(this.enableScrollSelection=!1,this.smallScreenModalVisible=!1,l(this.waitAndScrollToScopeWithValue(t.value))),this.lastRequestedSelectionValue=t.value,this.navigate.emit({value:this.selectedvalue,complete:()=>{this.reEnableScrollSelection(),this.smallScreenModalVisible=!1}})}async waitAndScrollToScopeWithValue(t){const e=this.self.closest("dx-site-navigation");for(let i=0;i<40;i++){if(this.selectedvalue!==t)return;const s=null==e?void 0:e.querySelector(`dx-site-navigation-scope[value='${t}']`);if(s){await this.scrollToElement(s,"smooth");break}0==i&&l(this.scrollToElement(e)),await h(125)}this.reEnableScrollSelection()}reEnableScrollSelection(){this.enableScrollSelection=!0,this.selectValueWhileScrolling(this.lastRequestedSelectionValue)}async scrollToElement(t,e){if(!t)return;const i=t.getBoundingClientRect().top;let s=this.headerState.isVisible?this.headerState.height:0;this.isLargeScreen||(s+=z+O);const o=i-s-k;o>0&&o<window.innerHeight/4||(l(g.instance().disableScrollInteractionForMs(S)),window.scrollBy({top:o,behavior:e}),await h(S))}getParentOf(t){return this.menuItems.find((e=>{var i;return e.value===t||(null===(i=e.children)||void 0===i?void 0:i.some((e=>e.value===t)))}))}renderItem(t,e=1){const i=1===e?null==t?void 0:t.children:[],s=i.length>0,o=i.some((t=>t.value===this.selectedvalue));return[n("div",{class:{item:!0,selected:o&&this.openedMenuItemValue!==t.value||t.value===this.selectedvalue,"level-1":1===e,"level-2":2===e},onClick:()=>this.clickOnItem(t)},n("div",{class:"indicator"}),n("div",{class:"indent"}),n("div",{class:{state:!0,hidden:!this.usesStates}},n("dx-icon",{icon:y[t.state],color:w[t.state],size:16})),n("div",{class:"label"},n("button",{onClick:e=>{e.stopPropagation(),this.clickOnItem(t)},id:d.createId(this.self,"button-"+t.value)},n("dx-text",{type:"it",color:"headline"},t.label))),n("div",{class:{arrow:!0}},s?n("button",{onClick:s?e=>{e.stopPropagation(),this.openCloseItem(t)}:void 0,id:d.createId(this.self,"open-close-control-"+t.value)},n("dx-chevron",{directiontop:t.value===this.openedMenuItemValue,size:16,active:t.value===this.selectedvalue})):void 0)),n("dx-simple-grow-box",{slidecontent:!0,open:t.value===this.openedMenuItemValue},i.map((t=>this.renderItem(t,e+1))))]}renderLargeScreenMenu(){const t=f(this.self,"action");return p((()=>setTimeout((()=>this.updateScrollabilityOfScrollContainer()),j))),n("div",{class:"large-screen-frame"},n("div",{class:"scroll-container",ref:t=>{this.scrollContainerElement=t,this.updateScrollabilityOfScrollContainer()}},this.menuItems.map((t=>this.renderItem(t)))),this.scrollContainerIsScrollable?n("div",{class:"separator"},n("div",{class:"shadow"}),n("div",{class:"border"})):null,t?n("div",{class:"action"},n("slot",{name:"action"})):null)}renderSmallScreenHeader(t){var e;const i=null!==(e=this.getParentOf(this.selectedvalue))&&void 0!==e?e:this.menuItems[0];if(i)return n("div",{class:{"small-screen-header":!0,static:"static"===t},onClick:()=>this.smallScreenModalVisible=!0},"static"===t?n("div",{class:"trigger",ref:t=>{this.smallScreenTriggerElement=t,this.configureSmallScreenIntersectionObserver()}}):null,n("div",{class:{state:!0,hidden:!this.usesStates}},n("dx-icon",{icon:y[i.state],color:w[i.state],size:16})),n("div",{class:"label"},n("dx-text",{type:"ps",color:"headline"},i.label)),n("div",{class:"open-menu"},n("button",{id:d.createId(this.self,"open-menu")},n("dx-icon",{icon:"ueberlauf-menue",color:"default",size:24}))))}renderSmallScreenMenu(){const t=f(this.self,"action");return[this.renderSmallScreenHeader("static"),n("div",{class:"floating-wrapper",ref:t=>{this.floatingWrapperElement=t,this.configureSmallScreenIntersectionObserver()}},this.renderSmallScreenHeader("floating")),n("dx-modal",{height:"internal-site-navigation-menu",label:this.titlestring,visible:this.smallScreenModalVisible,onModalClosed:()=>this.smallScreenModalVisible=!1},n("div",{slot:"content"},this.menuItems.map((t=>this.renderItem(t)))),t?n("slot",{name:"action",slot:"primary-actions"}):null)]}render(){return n(r,{class:{"large-screen":this.isLargeScreen},style:{top:`${k+(this.headerState.isVisible?this.headerState.height:0)}px`}},this.isLargeScreen?this.renderLargeScreenMenu():this.renderSmallScreenMenu(),n("slot",null))}get self(){return a(this)}static get watchers(){return{expandedlayoutat:["onExpandedLayoutAtChanges"]}}},w={error:"red-100",required:"gold",success:"green-100",none:"transparent"},y={error:"state-error",required:"state-required",success:"state-success",none:"state-error"},k=24,j=300,S=1e3,z=16,O=56;function C(t){return{root:null,rootMargin:"0px",threshold:t}}v.style=":host{display:block}:host:host([hidden]){display:none !important}:host:host(.large-screen){position:sticky;transition:top 300ms ease-in-out}:host .large-screen-frame{border:1px solid #d6d6d6;background-color:#ffffff}:host .large-screen-frame .scroll-container{min-height:240px;max-height:calc(100vh - 200px);overflow-y:auto}:host .large-screen-frame .separator{height:1px;position:relative;top:0;left:0}:host .large-screen-frame .separator .shadow{position:absolute;bottom:1px;height:4px;width:100%;background-color:rgba(0, 0, 0, 0.03)}:host .large-screen-frame .separator .border{height:1px;background-color:#d6d6d6}:host .large-screen-frame .action{padding:17px}:host .small-screen-header{display:flex;align-items:center;height:48px;box-sizing:border-box;background-color:#ffffff;border:1px solid #d6d6d6;padding-left:16px;padding-right:8px;cursor:pointer}:host .small-screen-header.static{position:relative;top:0;left:0;margin-bottom:32px}:host .small-screen-header .trigger{position:absolute;left:0;width:100%;top:-8px;height:64px;pointer-events:none}:host .small-screen-header .state{flex-shrink:0;width:24px}:host .small-screen-header .state.hidden{display:none}:host .small-screen-header .label{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .small-screen-header .open-menu{flex-shrink:0;width:40px;height:40px;display:flex;justify-content:center;align-items:center}:host .small-screen-header .open-menu button{width:var(--dx-button-width, fit-content);width:var(--dx-button-width, -moz-fit-content);cursor:pointer;display:inline-flex;justify-content:center;align-items:center;box-sizing:border-box;white-space:nowrap;user-select:none;-webkit-user-select:none;border:none;margin:0;background-color:transparent;transition:background-color 150ms ease-in-out, border-color 150ms ease-in-out;outline-offset:2px;width:40px;height:40px;display:flex;justify-content:center;align-items:center}:host .small-screen-header .open-menu button[disabled]{cursor:unset}:host .small-screen-header .open-menu button.icon-right{flex-direction:row-reverse}:host .small-screen-header .open-menu button:focus-visible{outline:2px solid #004763}:host .floating-wrapper{position:fixed;z-index:899;height:48px;background-color:#f7f7f7;padding-top:24px;padding-bottom:8px;transition:top 300ms ease-in-out, opacity 200ms ease-in;display:none}:host .floating-wrapper.visible{display:block}:host .floating-wrapper.visible.fade-out{opacity:0}:host .item{display:flex;align-items:stretch;user-select:none;cursor:pointer}:host .item .indicator{width:4px;flex-shrink:0}:host .item .indent{flex-shrink:0}:host .item .state{display:flex;align-items:center;flex-shrink:0;box-sizing:border-box;width:24px;padding-right:6px}:host .item .state.hidden{display:none}:host .item .label{flex-grow:1;display:flex;align-items:center;min-height:40px;padding:4px 0;box-sizing:border-box}:host .item .label button{width:var(--dx-button-width, fit-content);width:var(--dx-button-width, -moz-fit-content);cursor:pointer;display:inline-flex;justify-content:center;align-items:center;box-sizing:border-box;white-space:nowrap;user-select:none;-webkit-user-select:none;border:none;margin:0;background-color:transparent;transition:background-color 150ms ease-in-out, border-color 150ms ease-in-out;outline-offset:2px;width:auto;white-space:pre-wrap;text-align:left}:host .item .label button[disabled]{cursor:unset}:host .item .label button.icon-right{flex-direction:row-reverse}:host .item .label button:focus-visible{outline:2px solid #004763}:host .item .arrow{flex-shrink:0;display:flex;width:40px;justify-content:center;align-items:center}:host .item .arrow button{width:var(--dx-button-width, fit-content);width:var(--dx-button-width, -moz-fit-content);cursor:pointer;display:inline-flex;justify-content:center;align-items:center;box-sizing:border-box;white-space:nowrap;user-select:none;-webkit-user-select:none;border:none;margin:0;background-color:transparent;transition:background-color 150ms ease-in-out, border-color 150ms ease-in-out;outline-offset:2px;width:40px;height:40px;outline-offset:-4px;display:flex;justify-content:center;align-items:center}:host .item .arrow button[disabled]{cursor:unset}:host .item .arrow button.icon-right{flex-direction:row-reverse}:host .item .arrow button:focus-visible{outline:2px solid #004763}:host .item:hover{background-color:#f7f7f7}:host .item.selected{background-color:#f7f7f7}:host .item.selected .indicator{background-color:#c8aa22}:host .item:active{background-color:#ededed}:host .item.level-1 .indent{width:12px}:host .item.level-2 .indent{width:24px}";export{v as dx_site_navigation_menu}
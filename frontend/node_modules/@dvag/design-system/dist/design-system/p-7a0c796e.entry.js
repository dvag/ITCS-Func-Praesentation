import{r as t,c as i,h as e,H as s,g as o}from"./p-c66bef8d.js";import{d as n}from"./p-ac26d544.js";import{v as r,E as h}from"./p-70f48e14.js";import{E as l,h as a}from"./p-747d527e.js";import{c as d,e as p}from"./p-e0194d22.js";import{r as u}from"./p-aa0a06c6.js";import{R as c}from"./p-9e9cb538.js";import{L as b}from"./p-ea00c415.js";import"./p-15b13381.js";const f=class{constructor(e){t(this,e),this.valueChange=i(this,"valueChange",7),this.valueComplete=i(this,"valueComplete",7),this.formattedValue=void 0,this.preventObtainValueChanges=!1,this.lastUnpreventedInputElementValue=null,this.inputFocused=!1,this.active=!1,this.value=null,this.size="m",this.limitlength=null,this.min=Number.NEGATIVE_INFINITY,this.max=Number.POSITIVE_INFINITY,this.unit=void 0,this.disabled=!1,this.readonly=!1,this.required=!1,this.kisynced=!1}valueChanged(){this.obtainValueChangesFromOutside()}async focusControl(){this.inputElement.focus()}componentWillLoad(){r(this.self),this.obtainValueChangesFromOutside(!0)}componentShouldUpdate(t,i,e){["min","max"].includes(e)&&this.obtainValueChangesFromOutside()}onForceUpdateOnChange(t){t.detail(this.self)}getUnformattedValue(){return this.formattedValue?parseFloat(u(this.formattedValue.replace(/\./g,""))):null}obtainValueChangesFromOutside(t=!1){var i;this.preventObtainValueChanges||(this.value=this.sanitizeValue(this.value),(t||this.value!==this.getUnformattedValue())&&(this.formattedValue=this.getDisplayValue(),this.lastEmittedChangeValue=this.value,this.lastEmittedCompleteValue=this.value,this.lastUnpreventedInputElementValue=null===(i=this.value)||void 0===i?void 0:i.toString())),this.preventObtainValueChanges=!1}sanitizeValue(t){return isNaN(t)||null==t?null:d(t,this.min,this.max)}onInputFocused(){this.inputFocused=!0}onInputBlurred(){this.inputFocused=!1,this.setValueInternal(null!=this.value?d(this.value,this.min,this.max):this.value),this.emitValueChange(),this.emitValueComplete()}clearInput(){this.inputElement.value="",this.setValueInternal(null),this.formattedValue=null,this.lastUnpreventedInputElementValue="",this.emitValueChange()}setValueInternal(t){isNaN(t)&&(t=null),this.value!==t&&(this.preventObtainValueChanges=!0,this.formattedValue=this.getDisplayValue(t),this.value=t)}onInputKeyUp(t){"Enter"===t.key&&this.inputElement.blur()}preventInput(){var t;if(!this.inputElement.value||"-"===this.inputElement.value)return!1;if(!new RegExp(0===this.inputTypeDefinition.decimalDigits?"^-?[\\d]+$":"^-?[\\d]+[,|.]?[\\d]*$").test(this.inputElement.value))return!0;if(this.limitlength>0){const i=new RegExp("^-?([\\d]+)([,.][\\d]*)?$");if((null===(t=this.inputElement.value)||void 0===t?void 0:t.match(i)[1]).length>this.limitlength)return!0}return!1}computeDisplayValue(t){var i,e;return null!==(e=null===(i=p(d(t,this.min,this.max),this.inputTypeDefinition.decimalDigits))||void 0===i?void 0:i.toString())&&void 0!==e?e:""}onInput(){var t;if(this.preventInput()){const i=this.inputElement.selectionStart-1,e=this.lastUnpreventedInputElementValue||this.inputElement.value,s=parseFloat(u(this.lastUnpreventedInputElementValue)),o=parseFloat(u(this.inputElement.value));return this.inputElement.value=o!==s?null!==(t=this.computeDisplayValue(parseFloat(u(e))))&&void 0!==t?t:"":this.lastUnpreventedInputElementValue,this.inputElement.selectionStart=i,void(this.inputElement.selectionEnd=i)}this.lastUnpreventedInputElementValue=this.inputElement.value,this.setValueInternal(p(parseFloat(u(this.inputElement.value)),this.inputTypeDefinition.decimalDigits)),this.formattedValue=this.getDisplayValue(),this.emitValueChange()}emitValueChange(){this.value!==this.lastEmittedChangeValue&&(this.setValueInternal(this.getUnformattedValue()),this.lastEmittedChangeValue=this.value,this.valueChange.emit(this.value))}emitValueComplete(){this.lastEmittedCompleteValue!==this.value&&(this.valueComplete.emit(this.value),this.lastEmittedCompleteValue=this.value)}get inputTypeDefinition(){let t=null,i=0,e="0",s=!0;if("currency-euro"===this.profile?(t="â‚¬",i=2):"percent"===this.profile&&(t="%",i=0),null!=this.precision&&(i=this.precision),i>0){e+=",";for(let t=0;t<i;t++)e+="0"}return null!=this.placeholder&&(e=this.placeholder),null!=this.unit&&(t=this.unit),null!=this.thousandseparator&&(s=this.thousandseparator),{unit:t,placeholder:e,decimalDigits:i,thousandsSeparator:s}}getDisplayValue(t=null){return n(p(null!=t?t:this.value,this.inputTypeDefinition.decimalDigits),this.inputTypeDefinition.decimalDigits,this.inputTypeDefinition.thousandsSeparator)}isClearButtonVisible(){return this.inputFocused&&null!=this.formattedValue}render(){if(this.readonly){const t=this.inputTypeDefinition.unit;return e(c,{text:this.formattedValue+((null==t?void 0:t.length)>0?` ${t}`:""),label:this.label})}return e(s,{class:{disabled:this.disabled}},this.renderInput(),e(l,{self:this.self,message:this.errormessage}))}handleArrows(t){["ArrowUp","ArrowDown"].includes(t.key)&&(this.setValueInternal(this.inputElement.valueAsNumber),this.emitValueChange())}renderInput(){var t;const i=this.inputTypeDefinition;return e("label",null,e(b,{containerProperties:{size:this.size,active:this.inputFocused,error:a(this.self),title:null===(t=this.value)||void 0===t?void 0:t.toString()},labelProperties:{label:this.label,disabled:this.disabled,required:this.required,kisynced:this.kisynced}},e("div",{class:"input-container"},e("input",Object.assign({id:h.createId(this.self,"control"),ref:t=>this.inputElement=t,onKeyUp:t=>this.onInputKeyUp(t),onInput:()=>this.onInput(),onFocus:()=>this.onInputFocused(),onBlur:()=>this.onInputBlurred(),onKeyDown:t=>this.handleArrows(t),type:this.inputFocused?"number":"text",inputMode:"numeric"},this.inputFocused?{step:this.step,min:this.min,max:this.max,value:this.value}:{value:this.formattedValue},{placeholder:i.placeholder,class:{animatable:null==i.unit,"clear-button-visible":this.isClearButtonVisible()},lang:"de-DE",disabled:this.disabled})),this.renderUnit(),this.renderClearButton())))}renderUnit(){const t=this.inputTypeDefinition.unit;if(null!=t)return e("dx-text",{class:{unit:!0,"valid-value":!this.inputFocused&&null!=this.value}},t)}renderClearButton(){return e("dx-clear-button",{onClearInput:()=>this.clearInput(),visible:this.isClearButtonVisible(),id:h.createId(this.self,"clear-button")})}get self(){return o(this)}static get watchers(){return{value:["valueChanged"]}}};f.style=":host{min-width:0;display:block}:host:host([hidden]){display:none !important}:host:host(.disabled){pointer-events:none}:host:host(.disabled:not(.nested-form-element)){opacity:0.4}:host label{display:block}:host label .container.size-s{position:relative;top:0;left:0;display:flex;height:40px;padding:8px 16px 8px 16px;--dx-info-button-offset-y:0px;box-sizing:border-box;border:1px solid #d6d6d6;border-bottom:var(--dx-container-border-bottom, 1px solid #d6d6d6);background-color:#ffffff;align-items:center;--dx-icon-color:#337a96}:host label .container.size-s.error{border-color:#9d2235;background-color:#f5e9eb}:host label .container.size-s.error input,:host label .container.size-s.error textarea{background:transparent}:host label .container.size-s.active{border-color:#004763;--dx-text-color:#004763;--dx-icon-color:#004763}:host label .container.size-m{position:relative;top:0;left:0;display:flex;height:48px;padding:10px 16px 10px 16px;box-sizing:border-box;border:1px solid #d6d6d6;border-bottom:var(--dx-container-border-bottom, 1px solid #d6d6d6);background-color:#ffffff;align-items:center;--dx-icon-color:#337a96}:host label .container.size-m.error{border-color:#9d2235;background-color:#f5e9eb}:host label .container.size-m.error input,:host label .container.size-m.error textarea{background:transparent}:host label .container.size-m.active{border-color:#004763;--dx-text-color:#004763;--dx-icon-color:#004763}:host label .container .input-container{display:flex;width:100%;align-items:center;overflow:hidden}:host label .container .input-container input{height:24px;border:none;outline:none;font-family:DVAG-Type;font-size:16px;line-height:24px;letter-spacing:0.02px;color:#2b2b2b;width:1px;flex-grow:1;padding:0}@media (min-width: 1280px){:host label .container .input-container input{font-size:18px;line-height:28px}}:host label .container .input-container input::placeholder{color:#ababab;opacity:1}:host label .container .input-container input:disabled{background-color:#ffffff}:host label .container .input-container .unit{margin-left:8px;--dx-text-color:#ababab}:host label .container .input-container .unit.valid-value{--dx-text-color:#2b2b2b}:host input{height:24px;border:none;outline:none;font-family:DVAG-Type;font-size:16px;line-height:24px;letter-spacing:0.02px;color:#2b2b2b;width:1px;flex-grow:1;padding:0;text-align:right}@media (min-width: 1280px){:host input{font-size:18px;line-height:28px}}:host input::placeholder{color:#ababab;opacity:1}:host input:disabled{background-color:#ffffff}:host input::-webkit-outer-spin-button,:host input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}:host input[type=number]{-moz-appearance:textfield}";export{f as dx_number_input}
import{r as o,h as t,H as s,g as r,c as e}from"./p-c66bef8d.js";import{u as i}from"./p-372cf900.js";import{P as h}from"./p-602d2bf7.js";import{o as n}from"./p-90458c1b.js";import{S as d}from"./p-968cb048.js";import{E as l}from"./p-3f966ea5.js";import{B as u}from"./p-4de2e84c.js";import"./p-fabbcf47.js";const a=class{constructor(t){o(this,t),this.blurTimeout=null,this.currentFocusedIndex=-1,this.containsRequiredField=!1,this.direction="row",this.size="max-content",this.requirementfulfilled=!1,this.internalRequirementFulfilled=!1}onDirectionChange(){n((()=>{this.computeBorders(),i(this.refreshWidth())}))}onRequirementFulfilled(){var o;this.internalRequirementFulfilled=this.isRequirementFulfilled(),null===(o=this.getRequiredNodes())||void 0===o||o.forEach((o=>{new h(o).set("requirement-fulfilled",this.internalRequirementFulfilled).execute()}))}connectedCallback(){this.slotObserver=new d(this.self,"ds-bordered-form-item",(o=>{this.nodes=o,this.containsRequiredField=this.nodes.some((o=>o.classList.contains("is-required"))),this.internalRequirementFulfilled=this.isRequirementFulfilled();const t=this.nodes.find((o=>o.classList.contains("has-focus")));this.nodes.indexOf(t)!==this.currentFocusedIndex&&(this.blurCurrent(),this.focusElement(t)),this.computeBorders(),this.refreshWidth().then()}))}disconnectedCallback(){var o;null===(o=this.slotObserver)||void 0===o||o.disconnect()}onChildWidthChanged(o){var t;(null===(t=this.nodes)||void 0===t?void 0:t.includes(o.target))&&(o.stopPropagation(),this.refreshWidth().then())}blurCurrent(){const o=this.nodes[this.currentFocusedIndex];(null==o?void 0:o.classList.contains("focused"))&&(null==o||o.classList.remove("focused")),(null==o?void 0:o.classList.contains("not-focused"))||null==o||o.classList.add("not-focused");const t=this.nodes[this.currentFocusedIndex-1];(null==t?void 0:t.classList.contains("focused"))&&(null==t||t.classList.remove("focused")),(null==t?void 0:t.classList.contains("not-focused"))||null==t||t.classList.add("not-focused"),this.currentFocusedIndex=-1}focusElement(o){clearTimeout(this.blurTimeout);const t=this.nodes.indexOf(o);if(t!=this.currentFocusedIndex){this.blurCurrent();const o=this.nodes[t];null==o||o.classList.remove("not-focused"),null==o||o.classList.add("focused");const s=this.nodes[t-1];null==s||s.classList.remove("not-focused"),null==s||s.classList.add("focused"),this.currentFocusedIndex=t}}async refreshWidth(){if(null!=this.wrapperElement)if("row"===this.direction)if("parent"===this.size)this.wrapperElement.style.width="100%";else{let o=0;this.wrapperElement.style.width="auto";for(const t of this.nodes){const s=36,r=await t.getContentWidth()+s;o=Math.max(r,o)}o>0&&(this.wrapperElement.style.width=`${this.nodes.length*o+(this.nodes.length+1)}px`)}else this.wrapperElement.style.width=null;this.nodes.forEach((o=>{const t=o.classList;t.contains("focused")||t.contains("not-focused")||t.add("not-focused")}))}computeBorders(){const o=this.nodes.filter((o=>!o.hasAttribute("hidden")));o.forEach(((t,s)=>{const r=0===s,e=s===o.length-1,i=t=>!e&&o[s+1].classList.contains(t),n=t=>!r&&o[s-1].classList.contains(t),d=r||n("is-readonly"),l=e||i("is-readonly"),u=i("has-focus"),a=i("has-error"),c=i("is-required"),f=n("has-focus"),p=n("has-error"),b=n("is-required");new h(t).set("first",d).set("last",l).set("prev-of-focused",u).set("prev-of-error",a).set("prev-of-required",c).set("next-of-focused",f).set("next-of-error",p).set("next-of-required",b).set("in-column","column"===this.direction).set("in-row","row"===this.direction).set("parent-size","parent"===this.size).execute()}))}getRequiredNodes(){var o;return null===(o=this.nodes)||void 0===o?void 0:o.filter((o=>o.classList.contains("is-required")))}isRequirementFulfilled(){var o;return this.requirementfulfilled||(null===(o=this.getRequiredNodes())||void 0===o?void 0:o.every((o=>o.classList.contains("requirement-fulfilled"))))}render(){const o={};return o[this.direction]=!0,t(s,{class:Object.assign(Object.assign({},o),{"parent-size":"parent"===this.size,required:this.containsRequiredField})},t("div",{class:"container"},t("div",{class:"wrapper",ref:o=>this.wrapperElement=o},t("slot",null),t(l,{text:this.errormessage,show:-1!==this.currentFocusedIndex})),t("ds-required-hint",{required:this.containsRequiredField,fulfilled:this.internalRequirementFulfilled})))}get self(){return r(this)}static get watchers(){return{direction:["onDirectionChange"],requirementfulfilled:["onRequirementFulfilled"]}}};a.style=":host{display:block}:host:host([hidden]){display:none !important}:host .wrapper{display:flex;position:relative;border-radius:4px}:host .container{position:relative;display:block;width:max-content}:host:host(.row) .container .wrapper{flex-direction:row}:host:host(.column) .container .wrapper{flex-direction:column;width:fit-content;width:-moz-fit-content}:host:host(.parent-size) .container{width:100%}:host:host(.parent-size) .container .wrapper{width:100%}";const c=["ds-radio-button","ds-checkbox"],f=class{constructor(t){o(this,t),this.widthChanged=e(this,"widthChanged",7),this.inputFocused=!1}connectedCallback(){var o;this.slotObserver=new d(this.self,"*",(o=>{this.formComponent=o.find((o=>c.includes(o.tagName.toLowerCase())&&o.classList.contains("hydrated"))),this.errormessage=this.getFormComponentAttribute("errormessage"),this.configureStates()})),null===(o=this.resizeObserver)||void 0===o||o.observe(this.contentElement)}componentDidLoad(){this.resizeObserver=new ResizeObserver((()=>{this.widthChanged.emit(this.contentElement.offsetWidth)})),this.resizeObserver.observe(this.contentElement)}disconnectedCallback(){var o,t;null===(o=this.slotObserver)||void 0===o||o.disconnect(),null===(t=this.resizeObserver)||void 0===t||t.disconnect()}getFormComponentAttribute(o,t=null){var s,r,e,i;if(null===(s=this.formComponent)||void 0===s?void 0:s[o])return null===(r=this.formComponent)||void 0===r?void 0:r[o];const h=null===(e=this.formComponent)||void 0===e?void 0:e.getAttribute(o);return"boolean"==typeof t?"true"===h:"number"==typeof t?isNaN(+h)?null:+h:null!==(i=h)&&void 0!==i?i:t}configureStates(){var o,t,s;this.inputFocused=!!(null===(o=this.formComponent)||void 0===o?void 0:o.classList.contains("has-focus")),new h(this.self).set("has-error",(null===(t=this.errormessage)||void 0===t?void 0:t.length)>0||this.getFormComponentAttribute("error",!1)).set("has-focus",this.inputFocused).set("is-disabled",this.getFormComponentAttribute("disabled",!1)||(null===(s=this.formComponent)||void 0===s?void 0:s.classList.contains("disabled"))).set("is-readonly",this.getFormComponentAttribute("readonly",!1)).set("is-required",this.getFormComponentAttribute("required",!1)).set("requirement-fulfilled",this.getFormComponentAttribute("requirementfulfilled",!1)).set("has-form-component",null!=this.formComponent).execute()}async getContentWidth(){var o;return null===(o=this.contentElement)||void 0===o?void 0:o.offsetWidth}delegateEvent(o){var t,s;if(null!=this.formComponent&&!this.getFormComponentAttribute("disabled",!1)&&!this.getFormComponentAttribute("readonly",!1)&&(o.composedPath().includes(this.formComponent)||null===(s=null===(t=this.formComponent.shadowRoot)||void 0===t?void 0:t.querySelector(".event-delegate-receiver"))||void 0===s||s.dispatchEvent(new o.constructor(o.type,o)),["click","mousedown"].includes(o.type))){const o=this.formComponent;null!=o.focusControl&&o.focusControl()}}render(){return t(s,{onClick:o=>this.delegateEvent(o),onMouseDown:o=>this.delegateEvent(o),onMouseEnter:o=>this.delegateEvent(o),onMouseLeave:o=>this.delegateEvent(o)},window.chrome?null:t(u,{onlyDiv:!0}),t("div",{ref:o=>this.contentElement=o,class:"content-container"},t("slot",null)),t(l,{text:this.errormessage,show:this.inputFocused}))}get self(){return r(this)}};f.style=":host{display:flex;align-items:center;pointer-events:all;outline:none;padding:8px 24px 8px 12px;--ds-form-item-focus-color:transparent;white-space:nowrap;border:1px solid #c1c1c1;--ds-show-required-hint:none;--ds-text-line-height:20px;box-sizing:border-box}:host:host([hidden]){display:none !important}:host:host(.parent-size){white-space:normal}:host:host(.has-form-component){cursor:pointer}:host:host(.in-column){border-top-width:0}:host:host(.in-row){width:100%;flex-grow:1;flex-shrink:1;border-left-width:0}:host:host(.first.in-column){border-top-width:1px;border-top-left-radius:4px;border-top-right-radius:4px}:host:host(.first.in-row){border-left-width:1px;border-top-left-radius:4px;border-bottom-left-radius:4px}:host:host(.last.in-column){border-bottom-left-radius:4px;border-bottom-right-radius:4px}:host:host(.last.in-row){border-top-right-radius:4px;border-bottom-right-radius:4px}:host:host(.prev-of-focused):host(.in-column),:host:host(.prev-of-error):host(.in-column),:host:host(.prev-of-required):host(.in-column){border-bottom-width:0}:host:host(.prev-of-focused):host(.in-row),:host:host(.prev-of-error):host(.in-row),:host:host(.prev-of-required):host(.in-row){border-right-width:0}:host:host(.is-required:not(.has-focus):not(.has-error)):host(:not(.requirement-fulfilled)){border-color:#e8b50e}:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-column){border-top-width:1px;border-bottom-width:1px}:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-column):host(.prev-of-focused),:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-column):host(.prev-of-error),:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-column):host(.prev-of-required){border-bottom-width:0}:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-column):host(.next-of-focused),:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-column):host(.next-of-error){border-top-width:0}:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-row){border-left-width:1px;border-right-width:1px}:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-row):host(.prev-of-focused),:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-row):host(.prev-of-error),:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-row):host(.prev-of-required){border-right-width:0}:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-row):host(.next-of-focused),:host:host(.is-required:not(.has-focus):not(.has-error)):host(.in-row):host(.next-of-error){border-left-width:0}:host:host(.has-error){position:relative;--dx-popup-offset-left:0px;--ds-display-popup:none}:host dx-popup{left:var(--ds-error-popup-offset, 0px)}:host:host(.has-error:not(.has-focus)){border-color:#be1413}:host:host(.has-error:not(.has-focus)):host(.in-column){border-top-width:1px;border-bottom-width:1px}:host:host(.has-error:not(.has-focus)):host(.in-column):host(.prev-of-focused),:host:host(.has-error:not(.has-focus)):host(.in-column):host(.prev-of-error){border-bottom-width:0}:host:host(.has-error:not(.has-focus)):host(.in-column):host(.next-of-focused){border-top-width:0}:host:host(.has-error:not(.has-focus)):host(.in-row){border-left-width:1px;border-right-width:1px}:host:host(.has-error:not(.has-focus)):host(.in-row):host(.prev-of-focused),:host:host(.has-error:not(.has-focus)):host(.in-row):host(.prev-of-error){border-right-width:0}:host:host(.has-error:not(.has-focus)):host(.in-row):host(.next-of-focused){border-left-width:0}:host:host(.has-focus){border-color:#4c4c4c}:host:host(.has-focus):host(.in-column){border-top-width:1px;border-bottom-width:1px}:host:host(.has-focus):host(.in-column):host(.prev-of-focused){border-bottom-width:0}:host:host(.has-focus):host(.in-row){border-left-width:1px;border-right-width:1px}:host:host(.has-focus):host(.in-row):host(.prev-of-focused){border-right-width:0}:host:host(.is-disabled),:host:host(.is-readonly){pointer-events:none;cursor:default}:host:host(.is-readonly){border-color:transparent;padding:0}";export{a as ds_bordered_form_group,f as ds_bordered_form_item}
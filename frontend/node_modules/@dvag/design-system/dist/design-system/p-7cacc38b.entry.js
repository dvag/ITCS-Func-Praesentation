import{r as t,c as i,f as e,h as s,H as n,g as o}from"./p-c66bef8d.js";import{S as r}from"./p-968cb048.js";import{g as a}from"./p-90458c1b.js";import{B as d}from"./p-76fa4815.js";import{g as h,G as l}from"./p-de87e78c.js";import{c}from"./p-e0194d22.js";import{C as p}from"./p-d021fd39.js";import{a as x}from"./p-dc250dcd.js";import{v as u,E as v}from"./p-70f48e14.js";import{G as m}from"./p-9de2ff9f.js";import{c as f}from"./p-aa0a06c6.js";import"./p-fabbcf47.js";import"./p-15b13381.js";const w=class{constructor(e){t(this,e),this.currentStepChange=i(this,"currentStepChange",7),this.stepsAreVisible=!0,this.expandedlayoutat="auto",this.orientation="horizontal"}onOrientationChanged(){this.updateInternalOrientation()}onValueChanged(t,i){var e;const s=this.steps.findIndex((t=>t.value===this.currentstep)),n=this.steps[s],o=this.steps[s-1];null!=n&&(null!=o?o:{finished:!0}).finished?(null===(e=this.contentSwitcher)||void 0===e||e.showValue(this.currentstep,!0),this.editWizardStep(n),this.currentStepChange.emit(this.currentstep)):(n?console.warn("You cannot navigate to a step when the previous steps aren't finished yet.",this.self):console.error(`There is no step which defines the value property with the value '${this.currentstep}'\nPossible values are [${this.steps.map((t=>`"${t.value}"`)).join(", ")}]`,this.self),this.currentstep=i),this.buildPageIndexTypes()}connectedCallback(){var t;this.initializeBreakpointAware(),this.initializeSlotObserver(),u(this.self),x((null===(t=this.headline)||void 0===t?void 0:t.length)>0,(()=>"It is mandatory to define the headline property. Please set it's value to the current page's headline."),this.self)}disconnectedCallback(){this.slotObserver.disconnect(),this.breakpointAware.disconnect()}onWizardStepFinishedChange(t){var i;const s=this.steps.map((t=>t.state)),n=this.getExtendedWizardStep(t.target.value);if(null!=n)if(t.detail){n.finished=!0,n.state="finished";const t=this.steps.indexOf(n),i=this.steps[t+1];i&&(i.state="edit",this.currentstep=i.value)}else"finished"===n.state?(n.finished=!1,n.state="visited"):"edit"===n.state&&(n.finished=!1);this.buildWizardStepStates();const o=null===(i=this.getCurrentEditedStep())||void 0===i?void 0:i.value;if(o!==this.currentstep)this.currentstep=o;else{const t=this.steps.map((t=>t.state));f(s,t)||e(this.self)}}initializeBreakpointAware(){this.breakpointAware=new d((()=>{this.updateInternalOrientation(),this.isMobileView()||(this.modal.visible=!1),e(this)}),!0)}initializeSlotObserver(){let t=!1;this.slotObserver=new r(this.self,":scope > dx-wizard-step",(async i=>{var e,s;await this.collectWizardSteps(i),this.updateInternalOrientation(),t?this.currentstep=null===(s=this.getCurrentEditedStep())||void 0===s?void 0:s.value:(this.buildWizardStepStates(),t=!0,this.currentstep||(this.currentstep=null===(e=this.getCurrentEditedStep())||void 0===e?void 0:e.value)),this.buildPageIndexTypes()}))}getCurrentEditedStep(){var t;return null!==(t=this.steps.find((t=>"edit"===t.state)))&&void 0!==t?t:this.steps[0]}getExpandedViewOrientation(){var t;return"vertical"===this.orientation||(null===(t=this.steps)||void 0===t?void 0:t.length)>6?"vertical":"horizontal"}buildWizardStepStates(){let t=this.steps.findIndex((t=>!t.finished))-1;const i=this.steps.length-1;t=t<-1?i:t;const e=c(this.steps.indexOf(this.getExtendedWizardStep(this.currentstep)),0,t+1),s=t===i;this.steps.forEach(((n,o)=>{const r=o===i&&s,a=o===e&&n.finished&&e<=t;n.state=o===e&&e<=t+1?"edit":-1!==e||o!==t+1&&!r?o<=t?"finished":o-1===t?"visited":"unvisited":"edit",n.finished="finished"===n.state||r||a,n.metaStepComponent.finished!==n.finished&&(n.metaStepComponent.finished=n.finished)}))}buildPageIndexTypes(){var t,i,e,s;const n=(null!==(i=null===(t=this.steps)||void 0===t?void 0:t.indexOf(this.getCurrentEditedStep()))&&void 0!==i?i:0)+1;this.pageIndexTypes=h(n,null!==(s=null===(e=this.steps)||void 0===e?void 0:e.length)&&void 0!==s?s:0,z)}setInternalOrientation(t){this.internalOrientation!==t&&(this.internalOrientation=t,this.buildPageIndexTypes())}getExtendedWizardStep(t){var i;return null===(i=this.steps)||void 0===i?void 0:i.find((i=>i.value===t))}onWizardStepInteraction(t){const i=this.getExtendedWizardStep(t.target.value);null!=i&&(this.editWizardStep(i),i.interact(),this.modal.visible=!1)}editWizardStep(t){const i=this.getCurrentEditedStep();null!=i&&(i.state=i.finished?"finished":"visited"),this.currentstep=t.value,t.state="edit"}async collectWizardSteps(t){var i;const e=await Promise.all(t.map((t=>t.toWizardStep())));this.steps=e.map((t=>{var i,e;return Object.assign(Object.assign({},t),{state:null!==(e=null===(i=this.getExtendedWizardStep(t.value))||void 0===i?void 0:i.state)&&void 0!==e?e:"unvisited"})})),x((null===(i=this.steps)||void 0===i?void 0:i.length)>1,(()=>"A <dx-wizard> component must have at least 2 different steps!"),this.self)}updateInternalOrientation(){"vertical"===this.getExpandedViewOrientation()?this.setInternalOrientation(this.isMobileView()?"horizontal":"vertical"):this.setInternalOrientation("horizontal")}isMobileViewForBreakpoint(t){switch(t){case m.MQ1:return!0;case m.MQ2:return"vertical"===this.getExpandedViewOrientation()||"mq3"===this.expandedlayoutat||"mq4"===this.expandedlayoutat;case m.MQ3:return"mq4"===this.expandedlayoutat;default:return!1}}isMobileView(){return this.breakpointAware.getEffectiveValue({mq1:this.isMobileViewForBreakpoint(m.MQ1),mq2:this.isMobileViewForBreakpoint(m.MQ2),mq3:this.isMobileViewForBreakpoint(m.MQ3),mq4:this.isMobileViewForBreakpoint(m.MQ4),mq5:this.isMobileViewForBreakpoint(m.MQ5)})}renderStepDisplayText(){var t,i;const e=this.steps.findIndex((t=>t.value===this.currentstep))+1,n=null!==(i=null===(t=this.steps)||void 0===t?void 0:t.length)&&void 0!==i?i:0;return s("dx-text",{type:"its",color:"headline"},"Schritt ",e," von ",n)}renderCurrentStepLabel(){var t;return s("dx-text",{class:"current-step-label",color:"headline",type:"ps-bold"},null===(t=this.getCurrentEditedStep())||void 0===t?void 0:t.label)}renderGap(t,i,e){return s("div",{class:{"gap-container":!0,visible:t}},s("div",{class:"gap"},s("div",{class:{"horizontal-line":!0,left:!0,blue:i}}),s("div",{class:{circle:!0,blue:i||e}}),s("div",{class:{circle:!0,center:!0,blue:i||e}}),s("div",{class:{circle:!0,blue:i||e}}),s("div",{class:{"horizontal-line":!0,right:!0,blue:e}})))}renderFirstGap(t){const i=this.steps[0].finished;return this.renderGap(t,i,i)}renderLastGap(t){return this.renderGap(t,t&&this.steps[this.pageIndexTypes[this.pageIndexTypes.length-3]-1].finished,t&&this.steps[this.steps.length-2].finished)}getLastVisitedStepIndex(){for(let t=this.steps.length-1;t>=0;--t)if(["visited","edit","finished"].includes(this.steps[t].state))return t;return-1}renderWizardStep(t){const{extendedWizardStep:i,orientation:e,index:n,indexOfLastVisitedStep:o,visible:r,useExtendedView:a}=t;return s("dx-internal-wizard-step",{id:v.createId(i.metaStepComponent,"internal"),class:"wizard-step",state:i.state,finished:i.finished,label:i.label,value:i.value,orientation:e,neighborIsInteractive:n<o,isFirstStep:0===n,isLastStep:n===this.steps.length-1,onInteraction:t=>this.onWizardStepInteraction(t),key:n,hidden:!r,isExtendedView:a})}renderWizardSteps(t){var i,e,s,n,o;const r=null!==(i=null==t?void 0:t.overrideOrientation)&&void 0!==i?i:this.internalOrientation,a=this.getLastVisitedStepIndex(),d="horizontal"===r,h=d&&(null===(e=this.pageIndexTypes)||void 0===e?void 0:e[1])===l,c=d&&(null===(s=this.pageIndexTypes)||void 0===s?void 0:s[(null===(n=this.pageIndexTypes)||void 0===n?void 0:n.length)-2])===l,p=null!==(o=null==t?void 0:t.overrideUseExtendedView)&&void 0!==o?o:!this.isMobileView();return[this.renderWizardStep({extendedWizardStep:this.steps[0],orientation:r,index:0,indexOfLastVisitedStep:a,visible:!0,useExtendedView:p}),this.renderFirstGap(h),this.steps.map(((t,i)=>0===i||i===this.steps.length-1?null:this.renderWizardStep({extendedWizardStep:t,orientation:r,index:i,indexOfLastVisitedStep:a,visible:!d||this.pageIndexTypes.includes(i+1),useExtendedView:p}))),this.renderLastGap(c),this.renderWizardStep({extendedWizardStep:this.steps[this.steps.length-1],orientation:r,index:this.steps.length-1,indexOfLastVisitedStep:a,visible:!0,useExtendedView:p})]}getConnectedContentSlots(){return a(this.self).filter((t=>!["",p].includes(t))).map((t=>({slot:t,stepIndex:this.steps.findIndex((i=>i.value===t))}))).filter((t=>-1!==t.stepIndex)).sort(((t,i)=>t.stepIndex-i.stepIndex)).map((t=>t.slot))}renderContextContainer(){return this.isMobileView()?s("button",{id:v.createId(this.self,"context-control"),class:"context-container",onClick:()=>{this.modal.visible=!0}},s("div",{class:"current-step-container"},s("div",{class:"steps-counter"},this.renderStepDisplayText()),s("div",null,this.renderCurrentStepLabel())),s("dx-button",{type:"text",icon:"ueberlauf-menue",id:v.createId(this.self,"context-button")})):s("div",null)}renderContent(){const t=this.getConnectedContentSlots();return 0===t.length?s("div",{class:"content-slot"},s("slot",{name:p})):s("dx-content-switcher",{key:"content-switcher",value:this.currentstep,ref:t=>{var i;this.contentSwitcher!==t&&(this.contentSwitcher=t,null!=this.currentstep&&(null===(i=this.contentSwitcher)||void 0===i||i.showValue(this.currentstep,!1)))}},t.map((t=>s("dx-content-switcher-item",{value:t},s("slot",{name:t})))))}renderView(){const t=[s("div",{class:{"wizard-steps-container":!0}},s("div",{class:{"wizard-steps":!0,visible:this.stepsAreVisible}},this.renderWizardSteps()),this.renderContextContainer()),this.renderContent()],i="vertical"===this.getExpandedViewOrientation(),e=(t,e)=>{if(!e)return i?`${t}-${12-t}`:"12/*"};return s("dx-grid",{key:"grid",rowgap:"32",mq1:"12/*",mq2:e(4,this.isMobileViewForBreakpoint(m.MQ2)),mq3:e(4,this.isMobileViewForBreakpoint(m.MQ3)),mq4:e(3,this.isMobileViewForBreakpoint(m.MQ4)),mq5:e(3,this.isMobileViewForBreakpoint(m.MQ5))},t)}render(){var t,i;if(null==this.steps)return;const e="horizontal"===this.internalOrientation;return s(n,{style:{"--dx-wizard-step-count":Math.min(null!==(i=null===(t=this.steps)||void 0===t?void 0:t.length)&&void 0!==i?i:0,z).toString()},class:{"expanded-layout-at-mq2":!this.isMobileViewForBreakpoint(m.MQ2),"expanded-layout-at-mq3":!this.isMobileViewForBreakpoint(m.MQ3),"expanded-layout-at-mq4":!this.isMobileViewForBreakpoint(m.MQ4),"orientation-horizontal":e,"orientation-vertical":!e}},this.renderView(),s("dx-modal",{id:v.createId(this.self,"steps-modal"),width:"internal-site-navigation-menu",height:"internal-site-navigation-menu",label:this.headline,class:"modal",ref:t=>this.modal=t},s("div",{slot:"content"},this.renderWizardSteps({overrideOrientation:"vertical",overrideUseExtendedView:!0}))))}get self(){return o(this)}static get watchers(){return{orientation:["onOrientationChanged"],currentstep:["onValueChanged"]}}},z=7;w.style=":host{display:block;--dx-content-switcher-transition-duration:750ms;--dx-wizard-step-flex:calc(2 - 1 / (8.75 - var(--dx-wizard-step-count)))}:host:host([hidden]){display:none !important}:host .wizard-steps-container .wizard-steps{display:flex}:host .wizard-steps-container .wizard-steps .wizard-step.is-first-step,:host .wizard-steps-container .wizard-steps .wizard-step.is-last-step{--dx-wizard-step-flex:1}:host .wizard-steps-container .context-container{width:var(--dx-button-width, fit-content);width:var(--dx-button-width, -moz-fit-content);cursor:pointer;display:inline-flex;justify-content:center;align-items:center;box-sizing:border-box;white-space:nowrap;user-select:none;-webkit-user-select:none;border:none;margin:0;background-color:transparent;transition:background-color 150ms ease-in-out, border-color 150ms ease-in-out;outline-offset:2px;display:flex;margin-top:12px;width:100%;padding:0}:host .wizard-steps-container .context-container[disabled]{cursor:unset}:host .wizard-steps-container .context-container.icon-right{flex-direction:row-reverse}:host .wizard-steps-container .context-container:focus-visible{outline:2px solid #004763}:host .wizard-steps-container .context-container .current-step-container{text-align:left;flex:1;margin-right:8px}:host .wizard-steps-container .context-container .current-step-container .steps-counter{margin-bottom:4px}:host .wizard-steps-container .context-container .current-step-container .current-step-label{white-space:break-spaces}:host .wizard-steps-container .context-container .context-menu-button{flex:0 0 40px}:host .gap-container{flex:var(--dx-wizard-step-flex);display:none}:host .gap-container.visible{display:flex}:host .gap-container .gap{display:flex;flex:1;align-items:center}:host .gap-container .gap .horizontal-line{background-color:#d6d6d6;flex:1}:host .gap-container .gap .circle{width:3px;height:3px;flex-grow:0;flex-shrink:0;border-radius:50%;background-color:#808080}:host .gap-container .gap .blue{background-color:#337a96}:host(.orientation-vertical) .wizard-steps{flex-direction:column;height:max-content}@media (min-width: 0px){:host(.orientation-vertical) .wizard-steps{font-size:14px;--dx-text-font-size:14px;line-height:20px;--dx-text-line-height:20px}}@media (min-width: 1280px){:host(.orientation-vertical) .wizard-steps{font-size:16px;--dx-text-font-size:16px;line-height:24px;--dx-text-line-height:24px}}:host(.orientation-vertical) .gap-container{display:none}@media (min-width: 0px){:host(.orientation-horizontal) .wizard-steps{font-size:12px;--dx-text-font-size:12px;line-height:16px;--dx-text-line-height:16px}}@media (min-width: 1280px){:host(.orientation-horizontal) .wizard-steps{font-size:14px;--dx-text-font-size:14px;line-height:20px;--dx-text-line-height:20px}}:host(.orientation-horizontal) .gap-container{flex-direction:row}:host(.orientation-horizontal) .gap-container .gap .horizontal-line{height:2px}:host(.orientation-horizontal) .gap-container .gap .horizontal-line.left{margin-right:4px}:host(.orientation-horizontal) .gap-container .gap .horizontal-line.right{margin-left:4px}:host(.orientation-horizontal) .gap-container .gap .circle.center{margin:0 2px}@media (min-width: 476px){:host(.expanded-layout-at-mq2) .wizard-steps{--dx-wizard-step-flex:1}:host(.expanded-layout-at-mq2) .wizard-steps .context-container{display:none}}@media (min-width: 760px){:host(.expanded-layout-at-mq3) .wizard-steps{--dx-wizard-step-flex:1}:host(.expanded-layout-at-mq3) .wizard-steps .context-container{display:none}}@media (min-width: 1024px){:host(.expanded-layout-at-mq4) .wizard-steps{--dx-wizard-step-flex:1}:host(.expanded-layout-at-mq4) .wizard-steps .context-container{display:none}}";export{w as dx_wizard}
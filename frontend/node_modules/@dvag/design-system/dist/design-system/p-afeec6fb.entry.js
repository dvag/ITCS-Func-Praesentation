import{r as t,c as i,w as s,a as o,h as e,H as h,g as r,f as n}from"./p-c66bef8d.js";import{i as l,o as p}from"./p-90458c1b.js";import{f as a,o as d}from"./p-aa0a06c6.js";const u=class{constructor(s){t(this,s),this.fixedAlignmentChange=i(this,"fixedAlignmentChange",7),this.hidePopup=!0,this.internalAnchorPosition="left",this.position="bottom",this.anchorposition="left",this.contentdisplay="block",this.offsetx=0,this.offsety=0,this.popupinteractable=!0,this.fixate=!1,this.disabled=!1}onDisabledChanged(){this.disabled?(this.resizeObserver.disconnect(),s((()=>{this.popupElement.style.setProperty("width","0")}))):this.initializeResizeObserver()}onWindowChange(){this.updatePosition()}connectedCallback(){this.initializeResizeObserver()}disconnectedCallback(){var t,i;null===(t=this.slotObserver)||void 0===t||t.disconnect(),null===(i=this.resizeObserver)||void 0===i||i.disconnect()}componentWillUpdate(){return this.updatePosition()}async updateFixedPosition(){return new Promise((t=>{o((()=>{var i;const s=this.contentElement.getBoundingClientRect(),o=document.documentElement.offsetWidth,e=null!==(i=this.fixatewidth)&&void 0!==i?i:s.width,h=Math.max(0,Math.min(s.left,o-e)),r=h<s.left?"right":"left";r!==this.internalAnchorPosition&&(this.internalAnchorPosition=r,this.fixedAlignmentChange.emit(this.internalAnchorPosition));const n=t=>`${t}px`;this.applyValues({top:n(s.bottom),left:n(h),bottom:void 0,width:n(s.width),height:void 0}).then(t)}))}))}initializeResizeObserver(){this.contentElement&&!this.disabled&&(null==this.resizeObserver&&(this.resizeObserver=new ResizeObserver((()=>{this.updatePosition()}))),this.resizeObserver.observe(this.contentElement))}async updatePosition(){if(!this.disabled)return this.internalUpdatePosition()}internalUpdatePosition(){return new Promise((t=>{if(this.contentElement&&this.popupElement&&l(this.self,"overlay"))return this.fixate?this.updateFixedPosition().then(t):void o((()=>{const i=a(this.contentElement,(t=>{if(!(t instanceof HTMLElement||t instanceof SVGElement))return!1;const i=getComputedStyle(t,null),s=i.getPropertyValue("position"),o=i.getPropertyValue("transform");return"static"!==s||"none"!==o}))||document.body;if(null==i)return void t();const s=i===document.body?document.documentElement:i,o=s.getBoundingClientRect(),e=this.popupElement.getBoundingClientRect(),h=this.contentElement.getBoundingClientRect(),r=this.computePosition(this.position,h,e,o,s);this.applyValues(r).then(t)}));t()}))}computeWidth(t,i,s){const o=d(this.self);if((null==o?void 0:o.length)>0)return s.width;if("top"===t||"bottom"===t){const t=this.anchorposition;if("left"===t)return i.width-(s.left-i.left)-f;if("right"===t)return s.right-i.left-f}}computePosition(t,i,s,o,e){if("top"===t||"bottom"===t){const h=i.left-o.left+e.scrollLeft+("left"===this.anchorposition?0:i.width-s.width),r=this.computeWidth(t,o,i);let n,l;if("top"===t)l=(e===document.documentElement?e.clientHeight:o.bottom)-i.top-e.scrollTop+this.offsety;else{const t=e===document.documentElement?0:o.top;n=i.bottom-t+e.scrollTop+this.offsety}return{left:`${h}px`,top:null!=n?`${n}px`:null,bottom:null!=l?`${l}px`:null,width:`${r}px`,height:"auto"}}if("left"===t||"right"===t){let h;return h="left"===t?i.left-o.left+e.scrollLeft-s.width-this.offsetx:i.right-o.left+e.scrollLeft+this.offsetx+o.width,{top:`${i.top-o.top+e.scrollTop}px`,bottom:null,left:`${h}px`,width:"auto",height:`${i.height}px`}}}applyValues(t){return new Promise((i=>{s((()=>{var s,o,e,h,r;this.hidePopup&&p((()=>{this.hidePopup=!1,n(this)})),this.popupElement.style.setProperty("top",null!==(s=t.top)&&void 0!==s?s:null),this.popupElement.style.setProperty("left",null!==(o=t.left)&&void 0!==o?o:null),this.popupElement.style.setProperty("bottom",null!==(e=t.bottom)&&void 0!==e?e:null),this.popupElement.style.setProperty("width",null!==(h=this.disabled?"0":t.width)&&void 0!==h?h:null),this.popupElement.style.setProperty("height",null!==(r=t.height)&&void 0!==r?r:null),i()}))}))}obtainContentRef(t){this.contentElement=t,!this.resizeObserver&&this.disabled&&this.internalUpdatePosition(),this.initializeResizeObserver()}obtainPopupRef(t){this.popupElement=t,this.updatePosition()}render(){const t=this.hidePopup||!l(this.self,"overlay");return e(h,null,e("div",{style:{display:this.contentdisplay},ref:t=>this.obtainContentRef(t)},e("slot",null)),e("div",{class:{popup:!0,disabled:this.disabled,fixate:this.fixate,"is-hidden":t,"not-interactive":!this.popupinteractable},ref:t=>this.obtainPopupRef(t)},e("slot",{name:"overlay"})))}get self(){return r(this)}static get watchers(){return{disabled:["onDisabledChanged"]}}},f=24;u.style=":host{display:block}:host:host([hidden]){display:none !important}:host .popup{position:absolute;z-index:1000;min-width:var(--dx-overlay-popup-min-width, min-content);max-width:var(--dx-overlay-popup-max-width, unset)}:host .popup.fixate{position:fixed}:host .popup.is-hidden{pointer-events:none;opacity:0}:host .popup.not-interactive{pointer-events:none}";const c=class{constructor(i){t(this,i),this.iconWidth=34,this.internalArrowPosition="left",this.internalDirection="left",this.type="info",this.show=!1,this.dstheme=!1,this.arrowposition="left",this.contentwidth="parent"}onDirectionChange(){this.internalDirection=this.arrowposition,this.internalArrowPosition=this.arrowposition}onResize(){this.updatePopupDirection()}componentWillLoad(){this.internalDirection=this.arrowposition,this.internalArrowPosition=this.arrowposition}componentDidRender(){this.updatePopupDirection()}updatePopupDirection(){s((()=>{this.base&&(this.base.classList.add("invisible"),"unconstrained"===this.contentwidth?this.bubble.style.maxWidth="inherit":"parent"===this.contentwidth&&(this.bubble.style.maxWidth="100%"),p((()=>{var t,i,e;if("left"===this.arrowposition&&"unconstrained"===this.contentwidth){const i=null!==(t=getComputedStyle(this.self).getPropertyValue("--dx-popup-offset-left"))&&void 0!==t?t:null;o((()=>{const t=this.availableSpace();s((()=>{var s,o,e,h,r,n,l,p;t.right>100?(this.internalDirection="left",null===(o=null===(s=this.bubble)||void 0===s?void 0:s.style)||void 0===o||o.setProperty("max-width",`${t.right}px`),null===(h=null===(e=this.base)||void 0===e?void 0:e.style)||void 0===h||h.setProperty("left",i)):(this.internalDirection="right",null===(n=null===(r=this.bubble)||void 0===r?void 0:r.style)||void 0===n||n.setProperty("max-width",`${t.left}px`),null===(p=null===(l=this.base)||void 0===l?void 0:l.style)||void 0===p||p.setProperty("left",`${this.calculateOffset(i)}px`))}))}))}null===(e=null===(i=this.base)||void 0===i?void 0:i.classList)||void 0===e||e.remove("invisible")})))}))}availableSpace(){const t=document.body.getBoundingClientRect(),i=this.self.getBoundingClientRect();return{left:i.x,right:t.width-i.x}}calculateOffset(t){const i=isNaN(parseInt(t))?0:parseInt(t);return-this.base.offsetWidth+this.iconWidth+i}renderPopup(){if(this.show)return e("dx-overlay",{position:"bottom",fixate:!0,fixatewidth:"error"===this.type?void 0:344,onFixedAlignmentChange:t=>{this.internalArrowPosition=t.detail}},e("div",null),e("div",{slot:"overlay",class:"base invisible",ref:t=>this.base=t},e("div",{class:{popup:!0,right:"right"===this.internalArrowPosition||"right"===this.internalDirection}},e("div",{class:"arrow-up"}),e("div",{class:"bubble",ref:t=>this.bubble=t},e("div",{class:{content:!0,right:"right"===this.internalArrowPosition||"right"===this.internalDirection}},e("slot",null))))))}render(){return e(h,{class:{error:"error"===this.type,"ds-theme":this.dstheme}},this.renderPopup())}get self(){return r(this)}static get watchers(){return{arrowposition:["onDirectionChange"]}}};c.style=":host{position:absolute;bottom:0;left:0;width:100%;z-index:100;display:block}:host:host([hidden]){display:none !important}:host .base{position:absolute;top:var(--dx-popup-offset-top, 1px);left:var(--dx-popup-offset-left, initial);right:var(--dx-popup-offset-right, initial);z-index:100}:host .base.invisible{opacity:0}:host .base .popup{padding-bottom:16px}:host .base .popup .arrow-up{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:6px solid #ffffff;position:relative;left:8px}:host .base .popup.right .arrow-up{left:15px}:host .base .popup .bubble{width:max-content;max-width:100%;display:block;background-color:#ffffff;box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.32)}:host .base .popup .bubble .content{white-space:break-spaces;text-align:left;padding:4px 8px}:host:host(:not(.error)) .base{max-width:min(344px, 100%)}:host:host(.error){--dx-text-color:#ffffff}:host:host(.error) .base{width:100%}:host:host(.error) .base .popup .arrow-up{border-bottom-color:var(--dx-popup-color, #9d2235)}:host:host(.error) .base .popup .bubble{background-color:var(--dx-popup-color, #9d2235)}:host:host(.ds-theme) .base{top:var(--dx-popup-offset-top, 1px);left:var(--dx-popup-offset-left, initial);right:var(--dx-popup-offset-right, initial)}:host:host(.ds-theme) .base .popup .arrow-up{border-bottom:6px solid #ffffff}:host:host(.ds-theme) .base .popup .bubble{background-color:#ffffff;border-radius:var(--dx-popup-border-radius, 4px)}:host:host(.ds-theme) .base .popup .bubble .content{--ds-text-font-size:14px;--ds-text-letter-spacing:0.02px;--ds-text-line-height:20px}:host:host(.ds-theme):host(.error){--ds-text-color:#ffffff}:host:host(.ds-theme):host(.error) .base .popup .arrow-up{border-bottom-color:var(--dx-popup-color, #be1413)}:host:host(.ds-theme):host(.error) .base .popup .bubble{background-color:var(--dx-popup-color, #be1413)}:host .right{-moz-transform:scale(-1, 1);-webkit-transform:scale(-1, 1);-o-transform:scale(-1, 1);-ms-transform:scale(-1, 1);transform:scale(-1, 1)}";export{u as dx_overlay,c as dx_popup}
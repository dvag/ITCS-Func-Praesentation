import{r as e,c as t,h as n,H as a,g as i}from"./p-c66bef8d.js";import{e as r}from"./p-bb7a30ab.js";import{D as o,M as s,a as l}from"./p-31a88832.js";import{f as d}from"./p-aa0a06c6.js";import{E as h}from"./p-70f48e14.js";import"./p-15b13381.js";function c(e,t,n,a){return o.isBeforeDate(e,t)||o.isAfterDate(e,n)?null:o.isSameDate(e,t)?"min":o.isSameDate(e,n)?"max":a()}function m(e,t){const n=new Date(null!=e?e:NaN);return"day"===t?n.setDate(n.getDate()+1):"month"===t?n.setMonth(n.getMonth()+1,1):"year"===t&&n.setFullYear(n.getFullYear()+1,0,1),n.setHours(0,0,0,0),n}function f(e,t){const n=new Date(null!=e?e:NaN);return"day"===t?n.setDate(n.getDate()-1):"month"===t?n.setMonth(n.getMonth()-1,1):"year"===t&&n.setFullYear(n.getFullYear()-1,0,1),n.setHours(0,0,0,0),n}function u(e){if(null==e)return null;const t=new Date(e);return t.setFullYear(0),t}function b(e){const t=u(e.date),n={from:u(e.selectedRange.from),to:u(e.selectedRange.to)},a=u(e.minDate),i=u(e.maxDate),r=f(a,"day"),l=m(i,"day"),d=s[t.getMonth()],h={Januar:31,Februar:29,MÃ¤rz:31,April:30,Mai:31,Juni:30,Juli:31,August:31,September:30,Oktober:31,November:30,Dezember:31}[d],b=[];for(let e=1;e<=36;++e){const a=o.newDate(0,t.getMonth(),e);b.push(e<=h?c(a,r,l,(()=>({label:e.toString(),date:new Date(a),bright:!1,active:o.isSameDate(a,n.from)||o.isSameDate(a,n.to),highlightedLeft:o.isAfterDate(a,n.from)&&o.isBeforeOrSameDate(a,n.to),highlightedRight:o.isAfterOrSameDate(a,n.from)&&o.isBeforeDate(a,n.to),interactable:!0}))):null)}const g=[];b.forEach(((e,t)=>{var n,a;const i=Math.floor(t/6);g[i]=null!==(a=null===(n=g[i])||void 0===n?void 0:n.concat(e))&&void 0!==a?a:[e]}));const p=o.getFirstDayOfMonth(t),x=o.getLastDayOfMonth(p);return{headerLabel:d,headerRow:null,rows:g,canNavigateLeft:t.getMonth()>0&&(!o.isValidDate(a)||o.isBeforeDate(a,p)),canNavigateRight:t.getMonth()<11&&(!o.isValidDate(i)||o.isAfterDate(i,x))}}window.callIt=()=>b({date:o.newDateFromString("2021-01-01"),selectedRange:{from:o.newDateFromString("2021-01-01"),to:void 0}});const g=class{constructor(n){e(this,n),this.rangeSelected=t(this,"rangeSelected",7),this.preventNextDateViewChange=!1,this.currentView="day",this.internalView="day",this.selectedRange={from:void 0,to:void 0},this.mode="day-month-year"}onValueChange(){this.updateInternalState()}connectedCallback(){this.parent=d(this.self,(e=>{const t=e.tagName.toLowerCase();return"dx-date-input"===t||"dx-date-range"===t}))}componentWillLoad(){const e=this.getInitializedView();this.currentView=e,this.internalView=e,this.updateInternalState()}getInitializedView(){return this.isDateSelectionEnabled()?"day":this.isMonthSelectionEnabled()?"month":this.isYearSelectionEnabled()?"year":void 0}adjustDateDependantOnCurrentMode(e){if(o.isValidDate(e)&&!this.isYearSelectionEnabled()){const t=new Date(e);return t.setFullYear(0),t}return e}updateInternalState(){var e;const t=r(this.value);if(this.selectedRange={from:t.from,to:this.rangeenabled?t.to:null},this.preventNextDateViewChange)return void(this.preventNextDateViewChange=!1);const n=o.isValidDate(this.minDate)?this.minDate:null,a=o.isValidDate(this.maxDate)?this.maxDate:null,i=this.adjustDateDependantOnCurrentMode(o.today);if(o.isBeforeDate(this.selectedRange.from,n))this.currentDate=new Date(n),this.internalDate=new Date(n);else if(o.isAfterDate(this.selectedRange.from,a))this.currentDate=new Date(a),this.internalDate=new Date(a);else{const t=null!==(e=this.selectedRange.from)&&void 0!==e?e:o.clamp(i,n,a);this.currentDate=this.adjustDateDependantOnCurrentMode(new Date(t)),this.internalDate=this.adjustDateDependantOnCurrentMode(new Date(t))}}isDateSelectionEnabled(){return"month-year"!==this.mode}isMonthSelectionEnabled(){return!0}isYearSelectionEnabled(){return"day-month"!==this.mode}onAnimationStart(){this.isAnimating=!0}onAnimationEnd(e){"fade-out"===e.animationName?(this.internalDate=new Date(this.currentDate),this.internalView=this.currentView):"fade-in"===e.animationName&&(this.addSlidingAnimation(this.calendarContainer,null),this.addSlidingAnimation(this.headerLabel,null),this.isAnimating=!1)}addSlidingAnimation(e,t){e.classList.remove("slide-left","slide-right","slide-in","slide-out"),null!=t&&e.classList.add(`slide-${t}`)}slide(e){this.addSlidingAnimation(this.calendarContainer,e),this.addSlidingAnimation(this.headerLabel,e)}navigate(e){var t;"left"===e?this.previous():"right"===e&&this.next(),null===(t=this.parent)||void 0===t||t.focusControl()}previous(){if(!this.isAnimating){switch(this.internalView){case"day":this.currentDate=o.getPreviousMonth(this.currentDate);break;case"month":this.currentDate.setFullYear(this.currentDate.getFullYear()-1,0,1);break;case"year":this.currentDate.setFullYear(this.currentDate.getFullYear()-10,0,1)}this.slide("left")}}next(){if(!this.isAnimating){switch(this.internalView){case"day":this.currentDate=o.getNextMonth(this.currentDate);break;case"month":this.currentDate.setFullYear(this.currentDate.getFullYear()+1,0,1);break;case"year":this.currentDate.setFullYear(this.currentDate.getFullYear()+10,0,1)}this.slide("right")}}onClickHeaderLabel(){this.currentView=this.getAboveView(),this.currentView!==this.internalView&&this.slide("in")}get maxDate(){const e=this.max?new Date(this.max):new Date(NaN);return e.setHours(0,0,0,0),o.isValidDate(e)||this.isYearSelectionEnabled()||e.setTime(o.newDate(0,11,31).getTime()),this.adjustDateDependantOnCurrentMode(e)}get minDate(){const e=this.min?new Date(this.min):new Date(NaN);return e.setHours(0,0,0,0),o.isValidDate(e)||this.isYearSelectionEnabled()||e.setTime(o.newDate(0,0,1).getTime()),this.adjustDateDependantOnCurrentMode(e)}handleRowEntryClick(e){var t,n,a,i,r;this.currentView=this.getBelowView(),null===(t=this.parent)||void 0===t||t.focusControl();const o=Object.assign({},this.selectedRange);if(this.currentView!==this.internalView)this.currentDate=e,this.slide("out");else{const t=new Date(e);this.rangeenabled?this.selectRange(t):this.selectedRange.from=t,this.selectedRange=Object.assign({},this.selectedRange),(null===(n=o.from)||void 0===n?void 0:n.getTime())===(null===(a=this.selectedRange.from)||void 0===a?void 0:a.getTime())&&(null===(i=o.to)||void 0===i?void 0:i.getTime())===(null===(r=this.selectedRange.to)||void 0===r?void 0:r.getTime())||this.rangeSelected.emit(Object.assign({},this.selectedRange))}}componentShouldUpdate(e,t,n){if("min"===n||"max"===n){const e=this.minDate,t=this.maxDate;o.isBeforeDate(this.selectedRange.from,e)&&(this.selectedRange.from=e),o.isAfterDate(this.selectedRange.to,t)&&(this.selectedRange.to=t)}}selectRange(e){this.preventNextDateViewChange=!0,null==this.selectedRange.from?this.selectedRange.from=e:null==this.selectedRange.to?o.isBeforeDate(e,this.selectedRange.from)?this.selectedRange.from=e:this.selectedRange.to=e:(this.selectedRange.from=e,this.selectedRange.to=void 0)}getAboveView(){const e=this.getViews(),t=e.indexOf(this.internalView);return e[Math.min(t+1,e.length-1)]}getBelowView(){const e=this.getViews(),t=e.indexOf(this.internalView);return e[Math.max(t-1,0)]}getViews(){const e=[];return this.isDateSelectionEnabled()&&e.push("day"),this.isMonthSelectionEnabled()&&e.push("month"),this.isYearSelectionEnabled()&&e.push("year"),e}createCalendar(){const e={date:this.internalDate,selectedRange:Object.assign({},this.selectedRange),minDate:this.minDate,maxDate:this.maxDate};switch(this.internalView){case"day":return this.isYearSelectionEnabled()?function(e){const t=e.date,n=e.selectedRange,a=e.minDate,i=e.maxDate,r=f(a,"day"),l=m(i,"day"),d=s[t.getMonth()]+" "+t.getFullYear(),h=o.getFirstDayOfMonth(t),u=o.getMondayOfWeek(h),b=o.getLastDayOfMonth(h),g=o.getSundayOfWeek(b),p=new Date(u),x=[];for(;o.isBeforeOrSameDate(p,g);)x.push(c(p,r,l,(()=>({label:p.getDate().toString(),date:new Date(p),bright:p.getMonth()!==h.getMonth(),active:o.isSameDate(p,n.from)||o.isSameDate(p,n.to),highlightedLeft:o.isAfterDate(p,n.from)&&o.isBeforeOrSameDate(p,n.to),highlightedRight:o.isAfterOrSameDate(p,n.from)&&o.isBeforeDate(p,n.to),interactable:!0})))),o.addDays(p,1);const v=o.getShortWeekdayNames().map((e=>({label:e,date:void 0,textType:"its"}))),y=[];return x.forEach(((e,t)=>{var n,a;const i=Math.floor(t/7);y[i]=null!==(a=null===(n=y[i])||void 0===n?void 0:n.concat(e))&&void 0!==a?a:[e]})),{headerLabel:d,headerRow:v,rows:y,canNavigateLeft:!o.isValidDate(a)||o.isBeforeDate(a,h),canNavigateRight:!o.isValidDate(i)||o.isAfterDate(i,b)}}(e):b(e);case"month":const t=function(e){const t=e.date,n=e.selectedRange,a=e.minDate,i=e.maxDate,r=f(a,"month"),s=m(i,"month"),d=l.map(((e,a)=>{const i=o.newDate(t.getFullYear(),a);return c(i,r,s,(()=>({label:e,bright:!1,active:o.isSameMonth(i,n.from)||o.isSameMonth(i,n.to),date:i,highlightedLeft:o.isAfterMonth(i,n.from)&&o.isBeforeOrSameMonth(i,n.to),highlightedRight:o.isAfterOrSameMonth(i,n.from)&&o.isBeforeMonth(i,n.to),interactable:!0})))})),h=[d.slice(0,4),d.slice(4,8),d.slice(8,12)],u=o.newDate(t.getFullYear()),b=o.newDate(t.getFullYear(),11,31);return{headerLabel:t.getFullYear().toString(),headerRow:void 0,rows:h,canNavigateLeft:!o.isValidDate(a)||o.isBeforeDate(a,u),canNavigateRight:!o.isValidDate(i)||o.isAfterDate(i,b)}}(e);return this.isYearSelectionEnabled()||(t.headerLabel="Monate"),t;case"year":return function(e){var t,n;const a=e.date,i=e.selectedRange,r=e.minDate,s=e.maxDate,l=f(r,"year"),d=m(s,"year"),h=a.getFullYear().toString(),u=parseInt(h[h.length-1]),b=a.getFullYear()-(u-1)-(u%10==0?10:0),g=o.newDate(b,0),p=o.newDate(g.getFullYear()+9,0),x=new Date(g),v=[];for(;o.isBeforeOrSameDate(x,p);){const e=null===(t=i.from)||void 0===t?void 0:t.getFullYear(),a=null===(n=i.to)||void 0===n?void 0:n.getFullYear(),r=x.getFullYear();v.push(c(new Date(x),l,d,(()=>({label:r.toString(),date:new Date(x),bright:!1,active:r===e||r===a,highlightedLeft:r>e&&r<=a,highlightedRight:r>=e&&r<a,interactable:!0})))),x.setTime(o.newDate(x.getFullYear()+1,0).getTime())}const y=o.getLastDayOfYear(p);return{headerLabel:`${g.getFullYear()} - ${p.getFullYear()}`,headerRow:void 0,rows:[v.slice(0,5),v.slice(5,10)],canNavigateLeft:!o.isValidDate(r)||o.isBeforeDate(r,g),canNavigateRight:!o.isValidDate(s)||o.isAfterDate(s,y)}}(e)}}renderRowEntry(e){var t,a,i;return function(e){var t;return void 0!==(null!==(t=null==e?void 0:e.label)&&void 0!==t?t:void 0)}(e)?n("div",{class:{"calendar-entry-container":!0,highlighted:e.highlightedLeft&&e.highlightedRight,"highlighted-left":e.highlightedLeft&&!e.highlightedRight,"highlighted-right":e.highlightedRight&&!e.highlightedLeft}},e.interactable?n("button",{key:`${o.dateToString(e.date)}-${this.currentView}`,id:h.createId(this.self,`row-entry-${o.dateToString(e.date)}`),tabIndex:-1,class:{"calendar-entry":!0,"bright-color":e.bright,selected:e.active},onClick:()=>this.handleRowEntryClick(e.date)},n("dx-text",{type:null!==(t=e.textType)&&void 0!==t?t:"ps"},e.label)):n("dx-text",{type:null!==(a=e.textType)&&void 0!==a?a:"ps"},e.label)):"min"===(i=e)||"max"===i?n("div",{class:{"calendar-entry-container":!0}},n("dx-icon",{size:24,icon:"min"===e?"chevron-rechts":"chevron-links",color:"default",class:{"calendar-entry":!0,bound:!0}})):function(e){return null===e}(e)?n("div",{class:{"calendar-entry-container":!0}}):void 0}renderErrorMessage(){var e;if((null===(e=this.errormessage)||void 0===e?void 0:e.length)>0)return n("dx-text",{class:"error-message",type:"its"},this.errormessage)}renderCalendar(e){return n("div",{class:{calendar:!0,"day-view":"day"===this.internalView,"month-view":"month"===this.internalView,"year-view":"year"===this.internalView}},e.headerRow?n("div",{class:{"calendar-row":!0,"header-labels":!0}},e.headerRow.map((e=>this.renderRowEntry(e)))):null,e.rows.map((e=>n("div",{class:"calendar-row"},e.map((e=>this.renderRowEntry(e)))))))}renderHeader(e,t,a){const i="year"===this.currentView;return n("div",{class:"header-container"},n("div",{class:{header:!0}},n("dx-button",{unfocusable:!0,onClick:()=>this.navigate("left"),disabled:!t,id:h.createId(this.self,"right-button"),icon:"chevron-links",type:"text"}),n("div",{class:"label-container",ref:e=>this.headerLabel=e,tabIndex:-1},n("dx-text",{style:{overflow:"hidden",width:i?"unset":"0"}},e),n("div",{style:{flex:i?"0":"1",overflow:"hidden"}},n("dx-button",{class:"label",id:h.createId(this.self,"header-label-button"),onClick:()=>this.onClickHeaderLabel(),type:"text",label:e,unfocusable:!0,stretch:!0}))),n("dx-button",{unfocusable:!0,onClick:()=>this.navigate("right"),disabled:!a,id:h.createId(this.self,"right-button"),icon:"chevron-rechts",type:"text"})))}render(){const e=this.createCalendar();return n(a,null,[this.renderHeader(e.headerLabel,e.canNavigateLeft,e.canNavigateRight),n("div",{class:{"calendar-container":!0},onAnimationEnd:e=>this.onAnimationEnd(e),onAnimationStart:()=>this.onAnimationStart(),ref:e=>this.calendarContainer=e},this.renderErrorMessage(),this.renderCalendar(e))])}get self(){return i(this)}static get watchers(){return{value:["onValueChange"]}}};g.style="@keyframes fade-in{0%{opacity:0}100%{opacity:1}}@keyframes fade-out{0%{opacity:1}100%{opacity:0}}:host{display:block;outline:none;background:white;min-width:280px;--dx-simple-grow-box-border-top-width:0px;--dx-simple-grow-box-border-right-width:0px;--dx-simple-grow-box-border-bottom-width:0px;--dx-simple-grow-box-border-left-width:0px;pointer-events:all}:host:host([hidden]){display:none !important}:host .header-container{height:64px;background-color:#ffffff;padding:0 16px;box-sizing:border-box}:host .header-container .header{height:100%;border-bottom:1px solid #c8aa22;display:flex;justify-content:space-between;align-items:center}:host .header-container .header .label-container{font-family:DVAG-Type, sans-serif;display:flex;justify-content:center;align-items:center;flex:1;font-size:16px;color:#c8aa22;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;--dx-button-outline-box-shadow:none}@keyframes to-the-left{0%{transform:translateX(0px)}100%{transform:translateX(-10px)}}@keyframes to-the-right{0%{transform:translateX(0px)}100%{transform:translateX(10px)}}@keyframes to-the-bottom{0%{transform:scale(1)}100%{transform:scale(0.8)}}@keyframes to-the-top{0%{transform:scale(1)}100%{transform:scale(1.2)}}:host .header-container .header .label-container.slide-right{animation:to-the-left 150ms ease-in, fade-out 150ms ease-in, to-the-right 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .header-container .header .label-container.slide-left{animation:to-the-right 150ms ease-in, fade-out 150ms ease-in, to-the-left 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .header-container .header .label-container.slide-in{animation:to-the-bottom 150ms ease-in, fade-out 150ms ease-in, to-the-top 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .header-container .header .label-container.slide-out{animation:to-the-top 150ms ease-in, fade-out 150ms ease-in, to-the-bottom 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container{padding:16px;width:100%;height:100%;box-sizing:border-box}@keyframes to-the-left{0%{transform:translateX(0px)}100%{transform:translateX(-10px)}}@keyframes to-the-right{0%{transform:translateX(0px)}100%{transform:translateX(10px)}}@keyframes to-the-bottom{0%{transform:scale(1)}100%{transform:scale(0.8)}}@keyframes to-the-top{0%{transform:scale(1)}100%{transform:scale(1.2)}}:host .calendar-container.slide-right{animation:to-the-left 150ms ease-in, fade-out 150ms ease-in, to-the-right 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container.slide-left{animation:to-the-right 150ms ease-in, fade-out 150ms ease-in, to-the-left 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container.slide-in{animation:to-the-bottom 150ms ease-in, fade-out 150ms ease-in, to-the-top 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container.slide-out{animation:to-the-top 150ms ease-in, fade-out 150ms ease-in, to-the-bottom 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container .slide-container{display:flex}:host .calendar-container dx-button{outline:none}:host .calendar-container .error-message{display:block;text-align:center;--dx-text-color:#9d2235;animation:fade-in 150ms;margin-bottom:12px}:host .calendar-container .calendar{--dx-button-outline-box-shadow:none;user-select:none;cursor:default;flex-grow:0;flex-shrink:0;box-sizing:border-box}:host .calendar-container .calendar .calendar-row{display:flex;justify-content:space-around;margin-bottom:12px}:host .calendar-container .calendar .calendar-row.header-labels{margin-bottom:16px;--dx-text-color:#ababab}:host .calendar-container .calendar .calendar-entry-container{flex:1;display:flex;justify-content:center;align-items:center}:host .calendar-container .calendar .calendar-entry-container.highlighted-left{background:linear-gradient(90deg, #e5eef2 50%, transparent 50%)}:host .calendar-container .calendar .calendar-entry-container.highlighted-right{background:linear-gradient(90deg, transparent 50%, #e5eef2 50%)}:host .calendar-container .calendar .calendar-entry-container.highlighted{background:#e5eef2}:host .calendar-container .calendar .calendar-entry-container .calendar-entry{width:var(--dx-button-width, fit-content);width:var(--dx-button-width, -moz-fit-content);cursor:pointer;display:inline-flex;justify-content:center;align-items:center;box-sizing:border-box;white-space:nowrap;user-select:none;-webkit-user-select:none;border:none;margin:0;background-color:transparent;transition:background-color 150ms ease-in-out, border-color 150ms ease-in-out;min-width:40px;min-height:40px;text-align:center;padding:4px;--dx-text-color:#2b2b2b}:host .calendar-container .calendar .calendar-entry-container .calendar-entry[disabled]{cursor:unset}:host .calendar-container .calendar .calendar-entry-container .calendar-entry.selected{background-color:#004763;--dx-text-color:#ffffff}:host .calendar-container .calendar .calendar-entry-container .calendar-entry.disabled{opacity:0.4;pointer-events:none}:host .calendar-container .calendar .calendar-entry-container .calendar-entry.bright-color{--dx-text-color:#ababab}:host .calendar-container .calendar .calendar-entry-container .calendar-entry.bound{border-left:1px solid #337a96;max-width:24px;padding:0;pointer-events:none}@media not all and (pointer: coarse){:host .calendar-container .calendar .calendar-entry-container .calendar-entry:not(.selected):hover{background-color:rgba(51, 122, 150, 0.1);--dx-text-color:#337a96}}:host .calendar-container .calendar .calendar-entry-container .calendar-entry:not(.selected):active{background-color:rgba(0, 88, 124, 0.2);--dx-text-color:#00587c}:host .calendar-container .calendar.day-view .calendar-entry{padding:0}:host .calendar-container .calendar.month-view{padding-top:4px}:host .calendar-container .calendar.month-view .calendar-entry{padding:0 8px}:host .calendar-container .calendar.year-view{padding-top:4px}:host .calendar-container .calendar.year-view .calendar-entry{padding:0 8px}";export{g as dx_calendar}
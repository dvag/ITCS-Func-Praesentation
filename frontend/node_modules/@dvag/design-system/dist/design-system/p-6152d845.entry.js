import{r as t,c as o,w as e,h as n,H as s,g as l}from"./p-c66bef8d.js";import{c as i}from"./p-968cb048.js";import{i as a}from"./p-90458c1b.js";import{D as d}from"./p-00a889bb.js";import{v as r,E as c}from"./p-70f48e14.js";import{a as h}from"./p-dc250dcd.js";import{M as u}from"./p-b6113267.js";import{T as m}from"./p-333a100c.js";import{i as b}from"./p-aa0a06c6.js";import"./p-fabbcf47.js";import"./p-15b13381.js";const p=class{constructor(e){t(this,e),this.buttonClick=o(this,"buttonClick",7),this.minButtonSpaceOnSides=16,this.submitResult=new d,this.customShowCalled=!1,this.transitionStartHelper=new m(this,this.handleTransitionStart),this.direction="column",this.ignoreSlots=!1,this.nooverlay=!1,this.visible=!1,this.actionsdirection="auto"}componentWillLoad(){r(this.self),this.submitResultSubscription=this.submitResult.subscribe((t=>{this.buttonClick.emit(t)})),this.nooverlay="true"===getComputedStyle(this.self).getPropertyValue("--nooverlay").trim()}connectedCallback(){this.slotObserver=i(this.self,"ds-alert-button",(async t=>{this.buttonsData=await Promise.all(t.map((t=>t.toAlertButtonData())))}))}componentDidRender(){const t=u.instance();if(this.visible?t.block(this.modalDialog):t.unblock(this.modalDialog),"auto"===this.actionsdirection){const t=Array.from(this.self.shadowRoot.querySelectorAll(".button ds-text"));if(t.some((t=>0!==t.offsetWidth)))e((()=>{this.direction=this.calculateDirection(t)}));else{const o=new MutationObserver((()=>{this.direction=this.calculateDirection(t),o.disconnect()})),e=this.self.shadowRoot.querySelector(".button ds-text");null!=e&&o.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}}else e((()=>{this.direction=this.actionsdirection}))}disconnectedCallback(){var t,o,e;null===(t=this.slotObserver)||void 0===t||t.disconnect(),null===(o=this.submitResultSubscription)||void 0===o||o.unsubscribe(),null===(e=this.transitionStartHelper)||void 0===e||e.disconnect(),u.instance().unblock(this.self)}onKeyDown(t){if(this.visible&&"Enter"===t.key){const o=t.composedPath()[0];if(o!==this.self){if(b(o,this.self))return;t.preventDefault(),t.stopPropagation()}const e=this.buttonsData.find((t=>t.confirm));null!=e&&this.handleButtonClick(e)}}calculateDirection(t){const o=327/t.length-2*this.minButtonSpaceOnSides;return t.some((t=>t.offsetWidth>o))?"column":"row"}async prepareShowAlert(t){return new Promise((o=>{t(o),this.ignoreSlots=!0,this.visible=!0})).then((t=>(this.ignoreSlots=!1,t)))}async show(){return h(1!=this.customShowCalled,(()=>"<ds-alert> show() sollte nicht benutzt werden, wenn vorher einer der vordefinierten showAlert() || showConfirm() Methoden benutzt wurde.")),new Promise((t=>{const o=this.submitResult.subscribe((e=>{t(e),null==o||o.unsubscribe()}));document.createComment("cpIf comment").replaceWith(this.self),this.visible=!0}))}async showAlert(t,o,e="Ok",n,s){return this.customShowCalled=!0,await this.prepareShowAlert((l=>{const i=[y(e,void 0,!0,"gold",!1,!1,(()=>l(!0)))];this.customRenderFunction=()=>[this.renderIcon(n,s),this.renderContent(t,o),this.renderButtons(i)]}))}async showConfirm(t,o,e,n,s,l,i=!1){return this.customShowCalled=!0,await this.prepareShowAlert((a=>{const d=[y(e,"false",!1,"gold",!1,!1,(()=>a(!1))),y(n,"true",!0,i?"rot":"gold",!i,!1,(()=>a(!0)))];this.customRenderFunction=()=>[this.renderIcon(s,l),this.renderContent(t,o),this.renderButtons(d)]}))}handleButtonClick(t){this.submitResult.next(t.value),this.visible=!1}handleTransitionStart(t){"transform"===t.propertyName&&this.visible&&(this.self.style.visibility="visible",this.self.focus())}handleTransitionEnd(t){"transform"!==t.propertyName||this.visible||(this.self.style.visibility="hidden",this.self.blur())}render(){return n(s,{class:{visible:this.visible,"no-overlay":this.nooverlay},tabIndex:0},n("div",{class:"overlay"}),n("div",{class:"modal-layout",ref:t=>this.transitionStartHelper.on(t),onTransitionEnd:t=>this.handleTransitionEnd(t)},n("ds-card",{class:"modal-element",ref:t=>this.modalDialog=t},this.ignoreSlots&&void 0!==this.customRenderFunction?this.customRenderFunction():this.renderDefault())))}renderDefault(){return[this.renderIconSlot(),this.renderDefaultContent(),this.renderButtons(this.buttonsData)]}renderIcon(t,o){if(null!=t)return n("div",{class:"icon-container"},n("ds-icon",{size:32,icon:t,color:o}))}renderIconSlot(){if(a(this.self,"icon"))return n("div",{class:"icon-container"},n("div",null,n("div",null,n("div",null,n("slot",{name:"icon"})))))}renderDefaultContent(){const t=a(this.self,"title"),o=a(this.self,"body");return[t||o?n("div",{class:{content:!0}},t?n("div",{class:"title"},n("div",null,n("slot",{name:"title"}))):null,o?n("div",{class:"body"},n("div",null,n("slot",{name:"body"}))):null):null,n("slot",null)]}renderContent(t,o){return n("div",{class:{content:!0}},n("div",{class:"title"},n("ds-text",{type:"u5"},t)),n("div",{class:"body"},n("ds-text",{type:"ft"},o)))}renderButtons(t){if((null==t?void 0:t.length)>0){const o="row"===this.direction;return n("div",{class:{"buttons-container":!0,"direction-right":o,"direction-down":!o}},t.map(((t,o)=>this.renderButton(t,o))))}}renderButton(t,o){const e=t.onClick;return n("div",{class:{button:!0,disabled:t.disabled},onClick:o=>{null!=e&&e(o),this.handleButtonClick(t)}},n("ds-text-button",{id:c.createId(this.self,"button-"+o),color:t.color,disabled:t.disabled},n("ds-text",{type:t.highlight?"ftf":void 0},t.label)))}get self(){return l(this)}};function y(t,o,e,n,s,l,i){return{label:t,value:o,confirm:e,color:n,highlight:s,disabled:l,onClick:i}}p.style=":host{display:block;outline:none}:host:host([hidden]){display:none !important}:host .overlay{position:fixed;z-index:1010;left:0;top:0;right:0;bottom:0;background-color:#666666;transition:opacity 300ms ease-in-out;opacity:0.6}:host .modal-layout{position:fixed;z-index:1011;left:0;top:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center}:host .modal-layout .modal-element{width:327px;overflow:hidden;transition:transform 300ms ease-in-out, opacity 300ms ease-in-out}:host .modal-layout .modal-element .icon-container{padding-top:24px;display:flex;justify-content:center;--ds-icon-attr-size:32}:host .modal-layout .modal-element .content{display:flex;padding:24px 16px 24px;flex-direction:column}:host .modal-layout .modal-element .content .title{margin:auto auto 8px;text-align:center;--ds-text-font-weight:700;--ds-text-letter-spacing:0.04px;--ds-text-color:#4c4c4c;--ds-text-font-size-small:18px;--ds-text-line-height-small:24px;--ds-text-font-size-large:20px;--ds-text-line-height-large:28px}:host .modal-layout .modal-element .content .body{margin:auto;text-align:center}:host .modal-layout .modal-element .buttons-container{border-top:0.5px solid #c1c1c1;display:flex}:host .modal-layout .modal-element .buttons-container.direction-right{flex-direction:row}:host .modal-layout .modal-element .buttons-container.direction-right .button{position:relative;border-right:0.5px solid #c1c1c1}:host .modal-layout .modal-element .buttons-container.direction-down{flex-direction:column}:host .modal-layout .modal-element .buttons-container.direction-down .button{position:relative;border-bottom:0.5px solid #c1c1c1}:host .modal-layout .modal-element .buttons-container .button{position:relative;flex:1;box-sizing:border-box;padding-top:16px;padding-bottom:16px;text-align:center;cursor:pointer;border-color:#c1c1c1}:host .modal-layout .modal-element .buttons-container .button.color-gold{--ds-text-color:#a7893d;--ds-icon-color:#a7893d}:host .modal-layout .modal-element .buttons-container .button.color-gold:hover{--ds-text-color:#957b36;--ds-icon-color:#957b36}:host .modal-layout .modal-element .buttons-container .button.color-gold:active{--ds-text-color:#856d30;--ds-icon-color:#856d30}:host .modal-layout .modal-element .buttons-container .button.color-gold.disabled{--ds-text-color:#e3dac4;--ds-icon-color:#e3dac4}:host .modal-layout .modal-element .buttons-container .button.color-rot{--ds-text-color:#be1413;--ds-icon-color:#be1413}:host .modal-layout .modal-element .buttons-container .button.color-rot:hover{--ds-text-color:#99100f;--ds-icon-color:#99100f}:host .modal-layout .modal-element .buttons-container .button.color-rot:active{--ds-text-color:#7d0d0d;--ds-icon-color:#7d0d0d}:host .modal-layout .modal-element .buttons-container .button.color-rot.disabled{--ds-text-color:#f2d0cf;--ds-icon-color:#f2d0cf}:host .modal-layout .modal-element .buttons-container .button:last-child{border:none}:host .modal-layout .modal-element .buttons-container .button:hover{background-color:#f5f5f5}:host .modal-layout .modal-element .buttons-container .button:active{background-color:#ebebeb}:host .modal-layout .modal-element .buttons-container .button.disabled{pointer-events:none}:host .modal-layout .modal-element .buttons-container .button ds-text-button.color-gold{--ds-text-color:#a7893d;--ds-icon-color:#a7893d}:host .modal-layout .modal-element .buttons-container .button ds-text-button.color-gold:hover{--ds-text-color:#957b36;--ds-icon-color:#957b36}:host .modal-layout .modal-element .buttons-container .button ds-text-button.color-gold:active{--ds-text-color:#856d30;--ds-icon-color:#856d30}:host .modal-layout .modal-element .buttons-container .button ds-text-button.color-gold.disabled{--ds-text-color:#e3dac4;--ds-icon-color:#e3dac4}:host .modal-layout .modal-element .buttons-container .button ds-text-button.color-rot{--ds-text-color:#be1413;--ds-icon-color:#be1413}:host .modal-layout .modal-element .buttons-container .button ds-text-button.color-rot:hover{--ds-text-color:#99100f;--ds-icon-color:#99100f}:host .modal-layout .modal-element .buttons-container .button ds-text-button.color-rot:active{--ds-text-color:#7d0d0d;--ds-icon-color:#7d0d0d}:host .modal-layout .modal-element .buttons-container .button ds-text-button.color-rot.disabled{--ds-text-color:#f2d0cf;--ds-icon-color:#f2d0cf}:host .modal-layout .modal-element .buttons-container .button ds-text{white-space:nowrap}:host(:not(.visible)){pointer-events:none}:host(:not(.visible)) .overlay{opacity:0}:host(:not(.visible)) .modal-layout .modal-element{transform:scale(0.6);opacity:0}:host(:not(.visible)) .modal-layout .modal-element *{display:none}:host(.no-overlay) .overlay{display:none}:host(.no-overlay) .modal-layout{position:inherit}";export{p as ds_alert}
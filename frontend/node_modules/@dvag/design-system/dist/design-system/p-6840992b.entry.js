import{r as t,c as e,h as i,H as n,g as s}from"./p-c66bef8d.js";import{c as o}from"./p-968cb048.js";import{v as a,E as l}from"./p-70f48e14.js";import{o as r}from"./p-90458c1b.js";import{s as m,a as h,H as d}from"./p-482531a8.js";import{n as u}from"./p-fabbcf47.js";import"./p-15b13381.js";import"./p-00a889bb.js";const c=class{constructor(i){t(this,i),this.navigate=e(this,"navigate",7),this.knobs=[],this.menuItems=[],this.headerHeight=0,this.contentBelowHeaderHeight=0,this.childrenBoxHeights=[]}connectedCallback(){this.registerMenuItemObserver(),this.headerHeightSubscription=m((t=>this.headerHeight=t)),this.contentHeightBelowHeaderSubscription=h((t=>this.contentBelowHeaderHeight=t));const t=d.instance();this.headerHeight=t.headerHeight,this.contentBelowHeaderHeight=t.contentHeightBelowHeader,this.resizeObserver=new ResizeObserver((()=>{this.updateKnobPositions(),this.measureChildrenBoxes()}))}disconnectedCallback(){var t,e,i,n;null===(t=this.menuItemObserver)||void 0===t||t.disconnect(),null===(e=this.headerHeightSubscription)||void 0===e||e.unsubscribe(),null===(i=this.contentHeightBelowHeaderSubscription)||void 0===i||i.unsubscribe(),null===(n=this.resizeObserver)||void 0===n||n.disconnect()}componentWillLoad(){a(this.self)}updateKnobPositions(){var t,e;const i=this.knobs.find((t=>this.active.startsWith(t.parentValue)));if(null==i)return;const n=this.active.length>i.parentValue.length+"/".length?this.active.split("/")[1]:null===(e=null===(t=this.menuItems.find((t=>t.value===i.parentValue)))||void 0===t?void 0:t.children[0])||void 0===e?void 0:e.value,s=this.self.shadowRoot.querySelector(`.measurement-box .menu-item[data-path='${i.parentValue}/${n}']`);if(null==s)return;const o=s.getBoundingClientRect(),a=s.parentElement.getBoundingClientRect();i.element.style.transform=`translateY(${o.y-a.y}px)`,i.element.style.height=`${o.height}px`}registerMenuItemObserver(){this.menuItemObserver=o(this.self,":scope > ds-navigated-content-menu-item.hydrated",(async t=>{this.menuItems=await Promise.all(t.map((async t=>Object.assign(Object.assign({},await t.toMenuItemModel()),{children:await Promise.all(Array.from(t.querySelectorAll(u("ds-navigated-content-menu-item"))).map((t=>t.toMenuItemModel())))}))).filter((t=>null!=t)))}))}measureChildrenBoxes(){const t=Array.from(this.self.shadowRoot.querySelectorAll(".measurement-box")).map((t=>({value:t.getAttribute("data-measurementbox"),height:t.offsetHeight})));(function(t,e){if(t.length!==e.length)return!0;return t.reduceRight(((t,e)=>t+e.height),0)!==e.reduceRight(((t,e)=>t+e.height),0)})(t,this.childrenBoxHeights)&&r((()=>this.childrenBoxHeights=t))}pathForItem(t){const e=this.menuItems.find((e=>{var i;return e===t||(null===(i=e.children)||void 0===i?void 0:i.includes(t))}));if(e===t)return e.value;{const i=e.children.find((e=>e===t));return`${e.value}/${i.value}`}}registerKnob(t,e){this.knobs=this.knobs.filter((e=>e.parentValue!==t)),this.knobs.push({parentValue:t,element:e})}navigateToItem(t){const e=this.pathForItem(t);this.navigate.emit({path:e,segments:e.split("/")})}render(){return i(n,{style:{top:`${this.headerHeight+this.contentBelowHeaderHeight+p}px`}},i("ds-card",null,i("ds-card-content",null,this.menuItems.map((t=>this.renderMenuItem(t))),i("slot",{name:"bottom"}))))}renderMenuItem(t){var e;const n=this.pathForItem(t),s=this.active.startsWith(n),o=(null===(e=t.children)||void 0===e?void 0:e.length)>0;return i("div",{class:{"menu-item":!0,active:s,"has-children":o,"level-1":!0}},i("div",{class:"menu-item-label"},i("div",{class:"main"},i("button",{type:"button",class:"navigate-button",id:l.createId(this.self,n),onClick:()=>this.navigateToItem(t)},i("ds-text",null,t.label),i("ds-icon",{icon:"drop-down",size:16,class:{visible:o&&!s,flip:s}}))),this.renderStatusIcons(t)),this.renderItemChildren(t.children,t.value,s))}renderItemChildren(t,e,n){if(!((null==t?void 0:t.length)>0))return null;const s=this.childrenBoxHeights.find((t=>t.value===e));return[this.renderItemChildrenMeasurementBox(t,e),i("div",{class:{children:!0,visible:n},style:{"max-height":null!=s?`${s.height}px`:"auto"}},i("div",{class:"slider"},i("div",{class:"line"}),i("div",{class:"knob",ref:t=>this.registerKnob(e,t)})),i("div",{class:"items"},t.map((t=>this.renderChild(t,n)))))]}renderItemChildrenMeasurementBox(t,e){return i("div",{class:"measurement-box","data-measurementbox":e,ref:t=>{this.resizeObserver.disconnect(),null!=t&&this.resizeObserver.observe(t)}},i("div",{class:"items"},t.map((t=>this.renderChild(t,!1)))))}renderChild(t,e){const n=this.pathForItem(t);return i("div",{class:{"menu-item":!0,"level-2":!0},"data-path":n},i("div",{class:"menu-item-label"},i("div",{class:"main"},i("button",{type:"button",class:"navigate-button",tabIndex:e?0:-1,id:l.createId(this.self,n),onClick:()=>{e&&this.navigateToItem(t)}},i("ds-text",null,t.label))),this.renderStatusIcons(t)))}renderStatusIcons(t){const e=t.error,n=!e&&t.warning,s=!e&&!n&&t.success;return i("div",{class:"status"},n?i("ds-icon",{icon:"achtung-circle",color:"gelb-1",size:16}):null,e?i("ds-icon",{icon:"achtung",color:"rot-1",size:16}):null,s?i("ds-icon",{icon:"success",color:"gruen-1",size:16}):null)}get self(){return s(this)}},p=24;c.style=":host{display:block;position:sticky;position:-webkit-sticky;top:0}:host:host([hidden]){display:none !important}:host .menu-item{margin-top:16px}:host .menu-item:first-child{margin-top:0}:host .menu-item .menu-item-label{display:flex}:host .menu-item .menu-item-label .main{flex-grow:1;overflow:hidden}:host .menu-item .menu-item-label .main .navigate-button{-moz-appearance:none;-webkit-appearance:none;appearance:none;border:0;padding:0;margin:0;background:none;cursor:pointer;text-align:left;display:flex;align-items:center;--ds-text-color:#424242}:host .menu-item .menu-item-label .main .navigate-button:focus{outline:none}:host .menu-item .menu-item-label .main .navigate-button ds-icon{margin-left:8px;display:none}:host .menu-item .menu-item-label .main .navigate-button ds-icon.visible{display:inline}:host .menu-item .menu-item-label .main .navigate-button ds-icon.flip{transform:rotate(180deg)}:host .menu-item .menu-item-label .status{flex:0 0 16px;margin-left:16px;position:relative;top:5px}:host .menu-item.level-1.active>.menu-item-label .navigate-button{--ds-text-color:#a7893d;--ds-text-font-weight:500}:host .menu-item .children{display:flex;box-sizing:border-box;transition:max-height 300ms ease-in-out;overflow:hidden}:host .menu-item .children .slider{position:relative;top:0;left:0;margin:16px 24px 0 12px;width:4px;flex-shrink:0}:host .menu-item .children .slider .line{height:100%;background-color:#dedede;margin:0 1px}:host .menu-item .children .slider .knob{position:absolute;left:0;top:0;width:100%;height:24px;background-color:#a7893d;border-radius:2px;transition:transform 300ms ease-in-out, height 300ms ease-in-out}:host .menu-item .children .items{width:calc(100% - 40px);margin-top:16px}:host .menu-item .children:not(.visible){max-height:0 !important;pointer-events:none}:host .menu-item .measurement-box{position:absolute;width:194px;left:100px;pointer-events:none;visibility:hidden}:host .menu-item .measurement-box .items{width:100%;margin-top:16px}";export{c as ds_navigated_content_menu}
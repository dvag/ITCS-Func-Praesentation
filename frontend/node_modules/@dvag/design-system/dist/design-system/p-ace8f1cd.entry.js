import{r as t,c as i,h as s,H as o,g as n}from"./p-c66bef8d.js";import{E as e}from"./p-70f48e14.js";import{w as a}from"./p-aa0a06c6.js";import{H as h}from"./p-482531a8.js";import{V as r}from"./p-15b13381.js";import{B as c}from"./p-76fa4815.js";import"./p-00a889bb.js";class l{constructor(){this.currentNotificationToasts=[],this.notificationCloseHandle=t=>this.internalCloseNotification(t.target)}static instance(){return r.instance().getOrPut("ds-notification-service",(()=>new l))}connect(){this.resizeObserver=new ResizeObserver((()=>{this.updatePositions()})),this.breakpointAware=new c((()=>{this.updatePositions()})),this.subscribeToHeaderChanges()}disconnect(){var t,i;null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(i=this.breakpointAware)||void 0===i||i.disconnect(),this.headerHeightSubscription.unsubscribe(),this.headerHeightSubscription=null}addNotificationToast(t){this.currentNotificationToasts.includes(t)||(null!=this.resizeObserver&&null!=this.breakpointAware||this.connect(),this.currentNotificationToasts.push(t),t.addEventListener("closeNotification",this.notificationCloseHandle),this.resizeObserver.observe(t),this.updatePositions())}internalCloseNotification(t){this.currentNotificationToasts=this.currentNotificationToasts.filter((i=>t!==i)),t.removeEventListener("closeNotification",this.notificationCloseHandle),this.resizeObserver.unobserve(t),0===this.currentNotificationToasts.length?this.disconnect():this.updatePositions()}getMargin(){return this.breakpointAware.xs?16:24}updatePositions(){const t=this.getMargin();let i=this.currentHeaderHeight+t;this.currentNotificationToasts.forEach((s=>{s.style.top=i+"px",i+=s.offsetHeight+t}))}setNotificationsTransition(t){this.currentNotificationToasts.forEach((i=>{i.style.transition=t}))}subscribeToHeaderChanges(){const t=h.instance();this.headerHeightSubscription=t.headerHeight$.subscribe((t=>{this.currentHeaderHeight=t,this.setNotificationsTransition("none"),this.updatePositions(),this.setNotificationsTransition("top 500ms ease-in-out")})),this.currentHeaderHeight=t.headerHeight}}const d=class{constructor(s){t(this,s),this.closeNotification=i(this,"closeNotification",7),this.show=!1}onVisibleChanged(){this.visible&&(clearTimeout(this.closeHandle),l.instance().addNotificationToast(this.self),a(2).then((()=>{this.show=this.visible})))}connectedCallback(){this.visible&&l.instance().addNotificationToast(this.self)}componentDidLoad(){requestAnimationFrame((()=>{this.show=this.visible}))}closeImmediately(){this.closeNotification.emit(),this.visible=!1}handleTransitionEnd(t){"opacity"!==t.propertyName&&(this.show?Number.isInteger(this.closeafter)&&this.closeafter>0&&(clearTimeout(this.closeHandle),this.closeHandle=setTimeout((()=>{this.show=!1}),1e3*this.closeafter)):(clearTimeout(this.closeHandle),this.closeImmediately()))}renderTitle(){return s("ds-text",{class:"title",type:"ftf"},this.titlestring)}renderSubContent(){if(this.subcontent)return s("ds-text",{class:"subcontent",type:"itk"},this.subcontent)}renderIcon(){if(this.icon)return s("div",{class:"icon-container"},s("ds-icon",{size:72,icon:this.icon,color:this.iconcolor}))}renderCloseButton(){return s("div",{class:"close-icon-container"},s("ds-function-icon-button",{id:e.createId(this.self,"close-button"),onClick:()=>this.show=!1},s("ds-icon",{icon:"schliessen-dialog",size:16})))}render(){return s(o,{class:{visible:this.visible}},s("div",{class:{flyout:!0,show:this.show,"page-wrapped-content":!0},onTransitionEnd:t=>this.handleTransitionEnd(t)},s("div",{class:"content-container"},this.renderIcon(),s("div",{class:"text-container"},this.renderTitle(),s("slot",null),this.renderSubContent())),this.renderCloseButton()))}get self(){return n(this)}static get watchers(){return{visible:["onVisibleChanged"]}}};d.style=":host{padding:0 16px;display:none;pointer-events:none;position:fixed;left:0;z-index:1002;width:100%;box-sizing:border-box;transition:top 500ms ease-in-out}:host:host([hidden]){display:none !important}@media (min-width: 768px){:host{padding:0 24px}}@media (min-width: 1200px){:host{padding:0 32px}}:host .page-wrapped-content{max-width:1200px;margin:0 auto}:host:host(.visible){display:block}:host .flyout{pointer-events:initial;display:flex;background-color:white;border-radius:6px;box-sizing:border-box;padding:24px;box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.16);opacity:0;transform:translateY(-100px);transition:opacity 500ms ease-in-out, transform 500ms ease-in-out;will-change:opacity, transform}:host .flyout.show{opacity:1;transform:translateY(0px)}:host .flyout .content-container{display:flex;width:100%}@media (min-width: 0px){:host .flyout .content-container{flex-direction:column}}@media (min-width: 768px){:host .flyout .content-container{flex-direction:row}}:host .flyout .icon-container{display:flex;align-items:center;justify-content:center}@media (min-width: 768px){:host .flyout .icon-container{margin-right:24px}}:host .flyout .text-container{flex:1}:host .flyout .text-container .title{display:block;margin-bottom:8px}:host .flyout .text-container .subcontent{display:block;margin-top:8px}:host .flyout .close-icon-container{margin-left:24px;position:absolute;right:24px}:host ds-text{display:block}";export{d as ds_notification_toast}
import{r as t,c as e,h as a,H as n,g as i}from"./p-c66bef8d.js";import{D as s,M as r,a as o}from"./p-31a88832.js";import{E as l}from"./p-70f48e14.js";import{f as d}from"./p-aa0a06c6.js";import{e as h}from"./p-1cba59f7.js";import"./p-15b13381.js";function c(t,e,a,n){return s.isBeforeDate(t,e)||s.isAfterDate(t,a)?null:s.isSameDate(t,e)?"min":s.isSameDate(t,a)?"max":n()}function m(t,e){const a=new Date(null!=t?t:NaN);return"day"===e?a.setDate(a.getDate()+1):"month"===e?a.setMonth(a.getMonth()+1,1):"year"===e&&a.setFullYear(a.getFullYear()+1,0,1),a.setHours(0,0,0,0),a}function f(t,e){const a=new Date(null!=t?t:NaN);return"day"===e?a.setDate(a.getDate()-1):"month"===e?a.setMonth(a.getMonth()-1,1):"year"===e&&a.setFullYear(a.getFullYear()-1,0,1),a.setHours(0,0,0,0),a}function u(t){if(null==t)return null;const e=new Date(t);return e.setFullYear(0),e}function g(t){const e=u(t.date),a={from:u(t.selectedRange.from),to:u(t.selectedRange.to)},n=u(t.minDate),i=u(t.maxDate),o=f(n,"day"),l=m(i,"day"),d=r[e.getMonth()],h={Januar:31,Februar:29,MÃ¤rz:31,April:30,Mai:31,Juni:30,Juli:31,August:31,September:30,Oktober:31,November:30,Dezember:31}[d],g=[];for(let t=1;t<=36;++t){const n=s.newDate(0,e.getMonth(),t);g.push(t<=h?c(n,o,l,(()=>({label:t.toString(),date:new Date(n),bright:!1,active:s.isSameDate(n,a.from)||s.isSameDate(n,a.to),highlightedLeft:s.isAfterDate(n,a.from)&&s.isBeforeOrSameDate(n,a.to),highlightedRight:s.isAfterOrSameDate(n,a.from)&&s.isBeforeDate(n,a.to),interactable:!0}))):null)}const b=[];g.forEach(((t,e)=>{var a,n;const i=Math.floor(e/6);b[i]=null!==(n=null===(a=b[i])||void 0===a?void 0:a.concat(t))&&void 0!==n?n:[t]}));const p=s.getFirstDayOfMonth(e),v=s.getLastDayOfMonth(p);return{headerLabel:d,headerRow:null,rows:b,canNavigateLeft:e.getMonth()>0&&(!s.isValidDate(n)||s.isBeforeDate(n,p)),canNavigateRight:e.getMonth()<11&&(!s.isValidDate(i)||s.isAfterDate(i,v))}}window.callIt=()=>g({date:s.newDateFromString("2021-01-01"),selectedRange:{from:s.newDateFromString("2021-01-01"),to:void 0}});const b=class{constructor(a){t(this,a),this.rangeSelected=e(this,"rangeSelected",7),this.preventNextDateViewChange=!1,this.currentView="day",this.internalView="day",this.selectedRange={from:void 0,to:void 0},this.mode="day-month-year"}onValueChange(){this.updateInternalState()}connectedCallback(){this.parent=d(this.self,(t=>{const e=t.tagName.toLowerCase();return"ds-date-input"===e||"ds-date-range"===e}))}componentWillLoad(){const t=this.getInitializedView();this.currentView=t,this.internalView=t,this.updateInternalState()}getInitializedView(){return this.isDateSelectionEnabled()?"day":this.isMonthSelectionEnabled()?"month":this.isYearSelectionEnabled()?"year":void 0}adjustDateDependantOnCurrentMode(t){if(s.isValidDate(t)&&!this.isYearSelectionEnabled()){const e=new Date(t);return e.setFullYear(0),e}return t}updateInternalState(){var t;const e=h(this.value);if(this.selectedRange={from:e.from,to:this.rangeenabled?e.to:null},this.preventNextDateViewChange)return void(this.preventNextDateViewChange=!1);const a=s.isValidDate(this.minDate)?this.minDate:null,n=s.isValidDate(this.maxDate)?this.maxDate:null,i=this.adjustDateDependantOnCurrentMode(s.today);if(s.isBeforeDate(this.selectedRange.from,a))this.currentDate=new Date(a),this.internalDate=new Date(a);else if(s.isAfterDate(this.selectedRange.from,n))this.currentDate=new Date(n),this.internalDate=new Date(n);else{const e=null!==(t=this.selectedRange.from)&&void 0!==t?t:s.clamp(i,a,n);this.currentDate=this.adjustDateDependantOnCurrentMode(new Date(e)),this.internalDate=this.adjustDateDependantOnCurrentMode(new Date(e))}}isDateSelectionEnabled(){return"month-year"!==this.mode}isMonthSelectionEnabled(){return!0}isYearSelectionEnabled(){return"day-month"!==this.mode}onAnimationStart(){this.isAnimating=!0}onAnimationEnd(t){"fade-out"===t.animationName?(this.internalDate=new Date(this.currentDate),this.internalView=this.currentView):"fade-in"===t.animationName&&(this.addSlidingAnimation(this.calendarContainer,null),this.addSlidingAnimation(this.headerLabel,null),this.isAnimating=!1)}addSlidingAnimation(t,e){t.classList.remove("slide-left","slide-right","slide-in","slide-out"),null!=e&&t.classList.add(`slide-${e}`)}slide(t){this.addSlidingAnimation(this.calendarContainer,t),this.addSlidingAnimation(this.headerLabel,t)}navigate(t){var e;"left"===t?this.previous():"right"===t&&this.next(),null===(e=this.parent)||void 0===e||e.focusControl()}previous(){this.isAnimating||("day"===this.internalView?this.currentDate=s.getPreviousMonth(this.currentDate):"month"===this.internalView?this.currentDate.setFullYear(this.currentDate.getFullYear()-1,0,1):"year"===this.internalView&&this.currentDate.setFullYear(this.currentDate.getFullYear()-10,0,1),this.slide("left"))}next(){this.isAnimating||("day"===this.internalView?this.currentDate=s.getNextMonth(this.currentDate):"month"===this.internalView?this.currentDate.setFullYear(this.currentDate.getFullYear()+1,0,1):"year"===this.internalView&&this.currentDate.setFullYear(this.currentDate.getFullYear()+10,0,1),this.slide("right"))}onClickHeaderLabel(){this.currentView=this.getAboveView(),this.currentView!==this.internalView&&this.slide("in")}get maxDate(){const t=this.max?new Date(this.max):new Date(NaN);return t.setHours(0,0,0,0),s.isValidDate(t)||this.isYearSelectionEnabled()||t.setTime(s.newDate(0,11,31).getTime()),this.adjustDateDependantOnCurrentMode(t)}get minDate(){const t=this.min?new Date(this.min):new Date(NaN);return t.setHours(0,0,0,0),s.isValidDate(t)||this.isYearSelectionEnabled()||t.setTime(s.newDate(0,0,1).getTime()),this.adjustDateDependantOnCurrentMode(t)}handleRowEntryClick(t){var e,a,n,i,s;this.currentView=this.getBelowView(),null===(e=this.parent)||void 0===e||e.focusControl();const r=Object.assign({},this.selectedRange);if(this.currentView!==this.internalView)this.currentDate=t,this.slide("out");else{const e=new Date(t);this.rangeenabled?this.selectRange(e):this.selectedRange.from=e,this.selectedRange=Object.assign({},this.selectedRange),(null===(a=r.from)||void 0===a?void 0:a.getTime())===(null===(n=this.selectedRange.from)||void 0===n?void 0:n.getTime())&&(null===(i=r.to)||void 0===i?void 0:i.getTime())===(null===(s=this.selectedRange.to)||void 0===s?void 0:s.getTime())||this.rangeSelected.emit(Object.assign({},this.selectedRange))}}componentShouldUpdate(t,e,a){if("min"===a||"max"===a){const t=this.minDate,e=this.maxDate;s.isBeforeDate(this.selectedRange.from,t)&&(this.selectedRange.from=t),s.isAfterDate(this.selectedRange.to,e)&&(this.selectedRange.to=e)}}selectRange(t){this.preventNextDateViewChange=!0,null==this.selectedRange.from?this.selectedRange.from=t:null==this.selectedRange.to?s.isBeforeDate(t,this.selectedRange.from)?this.selectedRange.from=t:this.selectedRange.to=t:(this.selectedRange.from=t,this.selectedRange.to=void 0)}getAboveView(){const t=this.getViews(),e=t.indexOf(this.internalView);return t[Math.min(e+1,t.length-1)]}getBelowView(){const t=this.getViews(),e=t.indexOf(this.internalView);return t[Math.max(e-1,0)]}getViews(){const t=[];return this.isDateSelectionEnabled()&&t.push("day"),this.isMonthSelectionEnabled()&&t.push("month"),this.isYearSelectionEnabled()&&t.push("year"),t}createCalendar(){const t={date:this.internalDate,selectedRange:Object.assign({},this.selectedRange),minDate:this.minDate,maxDate:this.maxDate};if("day"===this.internalView)return this.isYearSelectionEnabled()?function(t){const e=t.date,a=t.selectedRange,n=t.minDate,i=t.maxDate,o=f(n,"day"),l=m(i,"day"),d=r[e.getMonth()]+" "+e.getFullYear(),h=s.getFirstDayOfMonth(e),u=s.getMondayOfWeek(h),g=s.getLastDayOfMonth(h),b=s.getSundayOfWeek(g),p=new Date(u),v=[];for(;s.isBeforeOrSameDate(p,b);)v.push(c(p,o,l,(()=>({label:p.getDate().toString(),date:new Date(p),bright:p.getMonth()!==h.getMonth(),active:s.isSameDate(p,a.from)||s.isSameDate(p,a.to),highlightedLeft:s.isAfterDate(p,a.from)&&s.isBeforeOrSameDate(p,a.to),highlightedRight:s.isAfterOrSameDate(p,a.from)&&s.isBeforeDate(p,a.to),interactable:!0})))),s.addDays(p,1);const y=s.getShortWeekdayNames().map((t=>({label:t,date:void 0,textType:"itk"}))),x=[];return v.forEach(((t,e)=>{var a,n;const i=Math.floor(e/7);x[i]=null!==(n=null===(a=x[i])||void 0===a?void 0:a.concat(t))&&void 0!==n?n:[t]})),{headerLabel:d,headerRow:y,rows:x,canNavigateLeft:!s.isValidDate(n)||s.isBeforeDate(n,h),canNavigateRight:!s.isValidDate(i)||s.isAfterDate(i,g)}}(t):g(t);if("month"===this.internalView){const e=function(t){const e=t.date,a=t.selectedRange,n=t.minDate,i=t.maxDate,r=f(n,"month"),l=m(i,"month"),d=o.map(((t,n)=>{const i=s.newDate(e.getFullYear(),n);return c(i,r,l,(()=>({label:t,bright:!1,active:s.isSameMonth(i,a.from)||s.isSameMonth(i,a.to),date:i,highlightedLeft:s.isAfterMonth(i,a.from)&&s.isBeforeOrSameMonth(i,a.to),highlightedRight:s.isAfterOrSameMonth(i,a.from)&&s.isBeforeMonth(i,a.to),interactable:!0})))})),h=[d.slice(0,4),d.slice(4,8),d.slice(8,12)],u=s.newDate(e.getFullYear()),g=s.newDate(e.getFullYear(),11,31);return{headerLabel:e.getFullYear().toString(),headerRow:void 0,rows:h,canNavigateLeft:!s.isValidDate(n)||s.isBeforeDate(n,u),canNavigateRight:!s.isValidDate(i)||s.isAfterDate(i,g)}}(t);return this.isYearSelectionEnabled()||(e.headerLabel="Monate"),e}return"year"===this.internalView?function(t){var e,a;const n=t.date,i=t.selectedRange,r=t.minDate,o=t.maxDate,l=f(r,"year"),d=m(o,"year"),h=n.getFullYear().toString(),u=parseInt(h[h.length-1]),g=n.getFullYear()-(u-1)-(u%10==0?10:0),b=s.newDate(g,0),p=s.newDate(b.getFullYear()+9,0),v=new Date(b),y=[];for(;s.isBeforeOrSameDate(v,p);){const t=null===(e=i.from)||void 0===e?void 0:e.getFullYear(),n=null===(a=i.to)||void 0===a?void 0:a.getFullYear(),r=v.getFullYear();y.push(c(new Date(v),l,d,(()=>({label:r.toString(),date:new Date(v),bright:!1,active:r===t||r===n,highlightedLeft:r>t&&r<=n,highlightedRight:r>=t&&r<n,interactable:!0})))),v.setTime(s.newDate(v.getFullYear()+1,0).getTime())}const x=s.getLastDayOfYear(p);return{headerLabel:`${b.getFullYear()} - ${p.getFullYear()}`,headerRow:void 0,rows:[y.slice(0,5),y.slice(5,10)],canNavigateLeft:!s.isValidDate(r)||s.isBeforeDate(r,b),canNavigateRight:!s.isValidDate(o)||s.isAfterDate(o,x)}}(t):void 0}renderRowEntry(t){var e,n,i;return function(t){var e;return void 0!==(null!==(e=null==t?void 0:t.label)&&void 0!==e?e:void 0)}(t)?a("div",{class:{"calendar-entry-container":!0,highlighted:t.highlightedLeft&&t.highlightedRight,"highlighted-left":t.highlightedLeft&&!t.highlightedRight,"highlighted-right":t.highlightedRight&&!t.highlightedLeft}},t.interactable?a("ds-text-button",{key:`${s.dateToString(t.date)}-${this.currentView}`,id:l.createId(this.self,`row-entry-${s.dateToString(t.date)}`),unfocusable:!0,screensize:"small",class:{"calendar-entry":!0,"bright-color":t.bright,active:t.active},onClick:()=>this.handleRowEntryClick(t.date)},a("ds-text",{type:null!==(e=t.textType)&&void 0!==e?e:"it"},t.label)):a("ds-text",{type:null!==(n=t.textType)&&void 0!==n?n:"it"},t.label)):"min"===(i=t)||"max"===i?a("div",{class:{"calendar-entry-container":!0}},a("ds-icon",{size:24,icon:"listenpfeil",class:{"calendar-entry":!0,bound:!0,max:"max"===t}})):function(t){return null===t}(t)?a("div",{class:{"calendar-entry-container":!0}},a("div",{class:{"calendar-entry":!0}})):void 0}renderErrorMessage(){var t;if((null===(t=this.errormessage)||void 0===t?void 0:t.length)>0)return a("ds-text",{class:"error-message",type:"itk"},this.errormessage)}renderCalendar(t){return a("ds-grow-box",{animateoninit:!1,slidecontent:!1},a("div",{class:{calendar:!0,"day-view":"day"===this.internalView,"month-view":"month"===this.internalView,"year-view":"year"===this.internalView}},t.headerRow?a("div",{class:{"calendar-row":!0,"header-labels":!0}},t.headerRow.map((t=>this.renderRowEntry(t)))):null,t.rows.map((t=>a("div",{class:"calendar-row"},t.map((t=>this.renderRowEntry(t))))))))}renderHeader(t,e,n){return a("div",{class:{header:!0}},a("ds-function-icon-button",{unfocusable:!0,onClick:()=>this.navigate("left"),class:"left",disabled:!e,id:l.createId(this.self,"left-button")},a("ds-icon",{icon:"listenpfeil",size:24})),a("div",{class:"label-container"},a("ds-text-button",{class:"label",ref:t=>this.headerLabel=t,id:l.createId(this.self,"header-label-button"),onClick:()=>this.onClickHeaderLabel(),unfocusable:!0,color:"gold"},a("ds-text",null,t))),a("ds-function-icon-button",{unfocusable:!0,onClick:()=>this.navigate("right"),disabled:!n,id:l.createId(this.self,"right-button")},a("ds-icon",{icon:"listenpfeil",size:24})))}render(){const t=this.createCalendar();return a(n,null,[this.renderHeader(t.headerLabel,t.canNavigateLeft,t.canNavigateRight),a("div",{class:{"calendar-container":!0},onAnimationEnd:t=>this.onAnimationEnd(t),onAnimationStart:()=>this.onAnimationStart(),ref:t=>this.calendarContainer=t},this.renderErrorMessage(),this.renderCalendar(t))])}get self(){return i(this)}static get watchers(){return{value:["onValueChange"]}}};b.style='@keyframes fade-in{0%{opacity:0}100%{opacity:1}}@keyframes fade-out{0%{opacity:1}100%{opacity:0}}:host{display:block;outline:none;background:white;border-radius:4px;box-shadow:0 4px 12px 2px rgba(0, 0, 0, 0.16);min-width:239px}:host:host([hidden]){display:none !important}:host .header{background-color:#f5f5f5;padding:8px 12px;border-bottom:1px solid #dedede;display:flex;justify-content:space-between;align-items:center}:host .header .left{transform:rotate(180deg)}:host .header .label-container{font-family:"Helvetica Neue", "Helvetica Neue LT W01";display:flex;justify-content:center;flex:1;font-size:16px;color:#a7893d;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;--ds-button-outline-box-shadow:none}@keyframes to-the-left{0%{transform:translateX(0px)}100%{transform:translateX(-10px)}}@keyframes to-the-right{0%{transform:translateX(0px)}100%{transform:translateX(10px)}}@keyframes to-the-bottom{0%{transform:scale(1)}100%{transform:scale(0.8)}}@keyframes to-the-top{0%{transform:scale(1)}100%{transform:scale(1.2)}}:host .header .label-container .label.slide-right{animation:to-the-left 150ms ease-in, fade-out 150ms ease-in, to-the-right 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .header .label-container .label.slide-left{animation:to-the-right 150ms ease-in, fade-out 150ms ease-in, to-the-left 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .header .label-container .label.slide-in{animation:to-the-bottom 150ms ease-in, fade-out 150ms ease-in, to-the-top 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .header .label-container .label.slide-out{animation:to-the-top 150ms ease-in, fade-out 150ms ease-in, to-the-bottom 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container{padding:12px 8px;width:100%;height:100%;box-sizing:border-box}@keyframes to-the-left{0%{transform:translateX(0px)}100%{transform:translateX(-10px)}}@keyframes to-the-right{0%{transform:translateX(0px)}100%{transform:translateX(10px)}}@keyframes to-the-bottom{0%{transform:scale(1)}100%{transform:scale(0.8)}}@keyframes to-the-top{0%{transform:scale(1)}100%{transform:scale(1.2)}}:host .calendar-container.slide-right{animation:to-the-left 150ms ease-in, fade-out 150ms ease-in, to-the-right 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container.slide-left{animation:to-the-right 150ms ease-in, fade-out 150ms ease-in, to-the-left 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container.slide-in{animation:to-the-bottom 150ms ease-in, fade-out 150ms ease-in, to-the-top 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container.slide-out{animation:to-the-top 150ms ease-in, fade-out 150ms ease-in, to-the-bottom 150ms ease-in reverse 200ms, fade-in 150ms ease-in 200ms;animation-fill-mode:forwards;animation-iteration-count:1}:host .calendar-container .slide-container{display:flex}:host .calendar-container ds-text-button{outline:none}:host .calendar-container .error-message{max-width:200px;display:block;text-align:center;--ds-text-color:#be1413;animation:fade-in 150ms;margin-bottom:12px;margin-left:auto;margin-right:auto}:host .calendar-container .calendar{--ds-button-outline-box-shadow:none;user-select:none;cursor:default;flex-grow:0;flex-shrink:0;box-sizing:border-box;min-height:216px}:host .calendar-container .calendar .calendar-row{display:flex;justify-content:space-around;margin-bottom:12px}:host .calendar-container .calendar .calendar-row.header-labels{margin-bottom:16px}:host .calendar-container .calendar .calendar-entry-container{flex:1;display:flex;justify-content:center;align-items:center}:host .calendar-container .calendar .calendar-entry-container:first-child{border-bottom-left-radius:4px;border-top-left-radius:4px}:host .calendar-container .calendar .calendar-entry-container:last-child{border-bottom-right-radius:4px;border-top-right-radius:4px}:host .calendar-container .calendar .calendar-entry-container.highlighted-left{background:linear-gradient(90deg, #e3dac4 50%, transparent 50%)}:host .calendar-container .calendar .calendar-entry-container.highlighted-right{background:linear-gradient(90deg, transparent 50%, #e3dac4 50%)}:host .calendar-container .calendar .calendar-entry-container.highlighted{background:#e3dac4}:host .calendar-container .calendar.day-view .calendar-entry{padding:0}:host .calendar-container .calendar.month-view{padding-top:4px}:host .calendar-container .calendar.month-view .calendar-entry{padding:0 8px}:host .calendar-container .calendar.year-view{padding-top:4px}:host .calendar-container .calendar.year-view .calendar-entry{padding:0 8px}:host .calendar-container .calendar .calendar-entry{min-width:24px;min-height:24px;text-align:center;padding:4px;--ds-text-color:#666666}:host .calendar-container .calendar .calendar-entry.active{background-color:#a7893d;--ds-text-color:#ffffff;border-radius:24px}:host .calendar-container .calendar .calendar-entry.disabled{--ds-text-color:#c1c1c1}:host .calendar-container .calendar .calendar-entry.bright-color{--ds-text-color:#c1c1c1}:host .calendar-container .calendar .calendar-entry.bound{border-left:1px solid #a7893d;max-width:24px;padding:0}:host .calendar-container .calendar .calendar-entry.bound.max{transform:rotate(180deg)}';export{b as ds_calendar}
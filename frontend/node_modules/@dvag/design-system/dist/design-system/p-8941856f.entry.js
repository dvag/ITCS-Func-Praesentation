import{r as e,f as t,h as a,H as i,g as o}from"./p-c66bef8d.js";import{B as r}from"./p-76fa4815.js";import{c as n}from"./p-968cb048.js";import{a as s}from"./p-dc250dcd.js";import{H as p}from"./p-482531a8.js";import{i as d,a as h}from"./p-e8e759b6.js";import{E as c}from"./p-70f48e14.js";import{g as l}from"./p-aa0a06c6.js";import"./p-fabbcf47.js";import"./p-00a889bb.js";import"./p-15b13381.js";const u=class{constructor(t){e(this,t),this.userPopupOpen=!1,this.headerActionItems=[],this.renderActionItemsInHeader=!1,this.fullscreen=!1,this.brand="default"}connectedCallback(){this.breakpointAware=new r((()=>t(this))),this.userConfigObserver=n(this.self,"ds-header-user",(e=>{s(e.length<=1,(()=>"<ds-header> Zuviele <ds-header-user> Elemente gefunden")),e.length>0&&e[0].toHeaderUserConfiguration().then((e=>{this.userConfiguration=e}))})),this.customerConfigObserver=n(this.self,"ds-header-customer",(e=>{s(e.length<=1,(()=>"<ds-header> Zuviele <ds-header-customer> Elemente gefunden")),e.length>0&&e[0].toHeaderCustomerConfiguration().then((e=>this.customerConfiguration=e))}));const e=p.instance(),a=e.header;a&&a!==this.self&&console.warn('Es ist bereits ein <ds-header>-Element registriert worden.\n\n"Es kann nur einen geben".\n- Connor MacLeod'),e.header=this.self}disconnectedCallback(){var e,t,a,i;null===(e=this.breakpointAware)||void 0===e||e.disconnect(),null===(t=this.userConfigObserver)||void 0===t||t.disconnect(),null===(a=this.customerConfigObserver)||void 0===a||a.disconnect(),null===(i=this.headerActionItemObserver)||void 0===i||i.disconnect();const o=p.instance();o.header===this.self&&(o.header=null)}windowClicked(e){this.userPopupOpen&&!e.composedPath().includes(this.userAvatarElement)&&(this.toggleUserPopup(),e.stopPropagation())}getLogo(){return this.breakpointAware.xs?"bildmarke":"allfinanz"===this.brand?"wortmarke-allfinanz":"wortmarke"}toggleUserPopup(){this.userPopupOpen=!this.userPopupOpen}render(){return a(i,null,a("div",{class:"header-bar"},a("div",{class:{content:!0,"page-wrapped-content":!this.fullscreen}},a("div",{class:"logo"},a("ds-logo",{type:this.getLogo()})),a("div",{class:"center"},a("slot",{name:"center"}),this.renderCustomer()),a("div",{class:"right"},a("slot",{name:"right"}),this.renderHeaderItems()))),a("slot",{name:"below"}))}renderHeaderItems(){return this.renderActionItemsInHeader?a("div",{class:"action-items-in-header"},this.renderHeaderMenuActionItems(this.headerActionItems)):this.renderHeaderMenuItems()}renderCustomer(){if(null!=this.customerConfiguration)return a("ds-text",{type:"it"},this.customerConfiguration.typeLabel,": ",this.customerConfiguration.name)}renderHeaderMenuItems(){var e;if(null!=(null===(e=this.userConfiguration)||void 0===e?void 0:e.name))return a("div",{class:"user-avatar",ref:e=>this.userAvatarElement=e},a("button",{id:c.createIdFromString(this.userConfiguration.id,"menu-control"),class:{"user-avatar-button":!0,open:this.userPopupOpen},onClick:()=>this.toggleUserPopup()},a("div",{class:"filler"}),a("ds-user-avatar",{class:"avatar-circle",size:"header",imageurl:this.userConfiguration.imageUrl,initials:l(this.userConfiguration.name)}),a("div",{class:"filler"},a("ds-icon",{class:"arrow",size:16,icon:"drop-down"}))),a("div",{class:{popup:!0,open:this.userPopupOpen}},a("div",{class:"popup-inner"},this.renderHeaderMenuActionItems(this.headerActionItems),a("button",{id:c.createIdFromString(this.userConfiguration.id,"menu-item-control"),class:{"popup-head":!0,interactable:this.userConfiguration.usernameInteractable},disabled:!this.userConfiguration.usernameInteractable,onClick:()=>{this.userConfiguration.usernameInteractable&&this.userConfiguration.usernameInteraction()}},a("ds-text",{type:"it",screensize:"small",color:"anthrazit"},this.userConfiguration.name)),a("div",{class:"user-action-item-container"},this.renderHeaderMenuActionItems(this.userConfiguration.children)),a("div",{class:"popup-action"},a("ds-button",{id:"ds-header-btn-toggle-user-popup",size:"small",type:"secondary",onClick:()=>{this.userConfiguration.signOut(),this.toggleUserPopup()}},a("ds-text",null,"Abmelden"))))))}renderHeaderMenuActionItems(e){return a("div",{class:"action-item-container"},e.map((e=>d(e)?this.renderHeaderMenuAction(e):h(e)?this.renderHeaderActionMenuItemsRecursiv(e):void 0)))}renderHeaderMenuAction(e,t=0){var i;return[a("button",{id:c.createIdFromString(e.id,"control"),class:{"header-action-item":!0,highlight:e.highlight},onClick:()=>{e.oninteraction()}},a("ds-text",{type:"it"},null!==(i=e.label)&&void 0!==i?i:"")),this.renderSeparator(25*t)]}renderHeaderMenuActionList(e,t=0){var i;return[a("button",{id:c.createIdFromString(e.id,"control"),class:"header-action-item",onClick:()=>{e.toggleOpen()}},a("div",{class:"text-and-arrow"},a("ds-text",{type:"ft"},null!==(i=e.label)&&void 0!==i?i:""),a("ds-icon",{class:"arrow",size:16,icon:"drop-down"}))),this.renderSeparator(25*t)]}renderHeaderActionMenuItemsRecursiv(e,t=0){var i;return a("div",{class:{"action-list":!0,open:e.open}},[this.renderHeaderMenuActionList(e,t),null===(i=e.children)||void 0===i?void 0:i.map((e=>d(e)?this.renderHeaderMenuAction(e,t+1):h(e)?this.renderHeaderActionMenuItemsRecursiv(e,t+1):void 0))])}renderSeparator(e){return a("div",{class:"separator"},a("div",{class:"line",style:{width:`calc(100% - ${e}px)`}}))}get self(){return o(this)}};u.style=":host{display:block;position:-webkit-sticky;position:sticky;z-index:900;top:0;left:0;width:100%}:host:host([hidden]){display:none !important}:host .header-bar{padding:0 16px;display:block;box-sizing:border-box;height:64px;background-color:#ffffff;box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.16)}@media (min-width: 768px){:host .header-bar{padding:0 24px}}@media (min-width: 1200px){:host .header-bar{padding:0 32px}}:host .header-bar .page-wrapped-content{max-width:1200px;margin:0 auto}@media (min-width: 1200px){:host .header-bar{height:80px}}:host .header-bar .content{height:100%;display:flex;align-items:center}:host .header-bar .content .logo{display:flex;flex:0.5;width:100%}:host .header-bar .content .logo ds-text{padding:24px}@media (min-width: 768px){:host .header-bar .content .logo ds-text{padding-right:32px}}@media (min-width: 1200px){:host .header-bar .content .logo ds-text{padding-right:48px}}:host .header-bar .content .center{display:flex;justify-content:center;width:100%;flex:1}:host .header-bar .content .right{flex:0.5;display:flex;justify-content:flex-end;align-items:center;width:100%;height:100%}:host .header-bar .action-items-in-header{display:flex;height:100%}:host .header-bar .action-items-in-header .action-item-container .header-action-item{-moz-appearance:none;-webkit-appearance:none;appearance:none;background:none;cursor:pointer;border:none;width:100%;display:flex;cursor:pointer;width:100%;height:56px;box-sizing:border-box;justify-content:left;align-items:center;border:0;padding:0;margin:0;flex-grow:1;padding:16px}:host .header-bar .action-items-in-header .action-item-container .header-action-item:hover{background-color:#f5f5f5}:host .header-bar .action-items-in-header .action-item-container .header-action-item:active{background-color:#dedede}:host .header-bar .action-items-in-header .action-item-container .header-action-item.highlight ds-text{font-weight:bold}:host .header-bar .action-items-in-header .action-item-container ds-text{pointer-events:none;white-space:nowrap;overflow-x:hidden}:host .header-bar .action-items-in-header .action-item-container .action-list{width:100%;height:57px;overflow:hidden}:host .header-bar .action-items-in-header .action-item-container .action-list .text-and-arrow{display:flex;align-items:center;flex-grow:1;justify-content:space-between}:host .header-bar .action-items-in-header .action-item-container .action-list .text-and-arrow .arrow{transition:all linear 150ms}:host .header-bar .action-items-in-header .action-item-container .action-list.open{height:max-content}:host .header-bar .action-items-in-header .action-item-container .action-list.open .arrow{transform:rotate(180deg)}:host .user-avatar{position:relative;height:100%;user-select:none;-webkit-user-select:none}:host .user-avatar .user-avatar-button{-moz-appearance:none;-webkit-appearance:none;appearance:none;background:none;cursor:pointer;border:none;width:100%;display:flex;flex-direction:column;align-items:center;padding:0 8px;height:100%;transition:background-color 150ms ease-in-out}:host .user-avatar .user-avatar-button .avatar-circle{height:32px;flex-shrink:0}:host .user-avatar .user-avatar-button .filler{height:100%;flex-shrink:1;display:flex;justify-content:center;align-items:center}:host .user-avatar .user-avatar-button .filler .arrow{opacity:0;transition:opacity 150ms ease-in-out, transform 150ms ease-in-out;height:16px;transform:translateY(-100%)}:host .user-avatar .user-avatar-button:hover,:host .user-avatar .user-avatar-button.open{background-color:#f5f5f5;cursor:pointer}:host .user-avatar .user-avatar-button:hover .arrow,:host .user-avatar .user-avatar-button.open .arrow{opacity:1;transform:translateY(0)}:host .user-avatar .user-avatar-button.open .arrow{transform:rotate(180deg)}:host .user-avatar .popup{position:absolute;right:0;bottom:0;display:none}:host .user-avatar .popup.open{display:block;transition:height ease-in-out 500ms}:host .user-avatar .popup .popup-inner{position:absolute;top:1px;right:0;min-width:175px;max-width:345px;background-color:white;border-bottom-left-radius:6px;border-bottom-right-radius:6px;box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.32)}:host .user-avatar .popup .popup-inner .action-item-container .header-action-item{-moz-appearance:none;-webkit-appearance:none;appearance:none;background:none;cursor:pointer;border:none;width:100%;display:flex;cursor:pointer;width:100%;height:56px;box-sizing:border-box;justify-content:left;align-items:center;border:0;padding:0;margin:0;flex-grow:1;padding:16px}:host .user-avatar .popup .popup-inner .action-item-container .header-action-item:hover{background-color:#f5f5f5}:host .user-avatar .popup .popup-inner .action-item-container .header-action-item:active{background-color:#dedede}:host .user-avatar .popup .popup-inner .action-item-container .header-action-item.highlight ds-text{font-weight:bold}:host .user-avatar .popup .popup-inner .action-item-container ds-text{pointer-events:none;white-space:nowrap;overflow-x:hidden}:host .user-avatar .popup .popup-inner .action-item-container .action-list{width:100%;height:57px;overflow:hidden}:host .user-avatar .popup .popup-inner .action-item-container .action-list .text-and-arrow{display:flex;align-items:center;flex-grow:1;justify-content:space-between}:host .user-avatar .popup .popup-inner .action-item-container .action-list .text-and-arrow .arrow{transition:all linear 150ms}:host .user-avatar .popup .popup-inner .action-item-container .action-list.open{height:max-content}:host .user-avatar .popup .popup-inner .action-item-container .action-list.open .arrow{transform:rotate(180deg)}:host .user-avatar .popup .popup-inner .popup-head{-moz-appearance:none;-webkit-appearance:none;appearance:none;background:none;cursor:pointer;border:none;width:100%;padding:16px;background-color:#f5f5f5;text-align:left}:host .user-avatar .popup .popup-inner .popup-head.interactable{cursor:pointer}:host .user-avatar .popup .popup-inner .popup-head.interactable:hover{background-color:#c1c1c1}:host .user-avatar .popup .popup-inner .popup-head.interactable:active{background-color:#dedede}:host .user-avatar .popup .popup-inner .popup-action{padding:16px;display:flex;justify-content:center}:host .separator{display:flex;justify-content:flex-end}:host .separator .line{width:100%;height:1px;background-color:#f5f5f5}";export{u as ds_header}
import{r as t,c as i,h as e,H as n,g as s}from"./p-c66bef8d.js";import{v as o,E as l}from"./p-70f48e14.js";import{c as r}from"./p-e0194d22.js";import{d as h}from"./p-ac26d544.js";import{a,R as c}from"./p-4de2e84c.js";import{I as u}from"./p-38e28938.js";import{E as p}from"./p-3f966ea5.js";import"./p-15b13381.js";const d=class{constructor(e){t(this,e),this.valueChange=i(this,"valueChange",7),this.valueComplete=i(this,"valueComplete",7),this.formattedValue=void 0,this.preventObtainValueChanges=!1,this.lastUnpreventedInputElementValue=null,this.inputFocused=!1,this.active=!1,this.error=!1,this.value=null,this.limitlength=null,this.min=Number.MIN_SAFE_INTEGER,this.max=Number.MAX_SAFE_INTEGER,this.disabled=!1,this.readonly=!1,this.required=!1,this.kisynced=!1}valueChanged(){this.obtainValueChangesFromOutside()}async focusControl(){this.inputElement.focus()}componentWillLoad(){o(this.self),this.obtainValueChangesFromOutside(!0)}componentShouldUpdate(t,i,e){["min","max"].includes(e)&&this.obtainValueChangesFromOutside()}getUnformattedValue(){return this.formattedValue?parseFloat(this.formattedValue.replace(/\./g,"").replace(",",".")):null}obtainValueChangesFromOutside(t=!1){this.preventObtainValueChanges||(this.value=this.sanitizeValue(this.value),(t||this.value!==this.getUnformattedValue())&&(this.formattedValue=this.getDisplayValue(),this.lastEmittedChangeValue=this.value,this.lastEmittedCompleteValue=this.value)),this.preventObtainValueChanges=!1}sanitizeValue(t){if(isNaN(t)||null==t)return null;const i=Math.pow(10,this.inputTypeDefinition.decimalDigits);return t=Math.floor((t+1/(100*i))*i)/i,r(t,this.min,this.max)}onInputFocused(){this.inputFocused=!0}onInputBlurred(){this.inputFocused=!1,this.setValueInternal(this.sanitizeValue(this.value)),this.emitValueChange(),this.emitValueComplete()}clearInput(){this.inputElement.value="",this.setValueInternal(null),this.formattedValue=null,this.lastUnpreventedInputElementValue="",this.emitValueChange()}setValueInternal(t){isNaN(t)&&(t=null),this.value!==t&&(this.preventObtainValueChanges=!0,this.formattedValue=this.getDisplayValue(t),this.value=t)}onInputKeyUp(t){"Enter"===t.key&&this.inputElement.blur()}preventInput(){var t;if(!this.inputElement.value||"-"===this.inputElement.value)return!1;const i=this.inputTypeDefinition;if(!new RegExp(0===i.decimalDigits?"^-?[\\d]+$":`^-?[\\d]+[,|.]?[\\d]{0,${i.decimalDigits}}$`).test(this.inputElement.value))return!0;if(this.limitlength>0){const i=new RegExp("^-?([\\d]+)([,.][\\d]*)?$");if((null===(t=this.inputElement.value)||void 0===t?void 0:t.match(i)[1]).length>this.limitlength)return!0}return!1}onInput(){if(this.preventInput()){const t=this.inputElement.selectionStart-1;return this.inputElement.value=this.lastUnpreventedInputElementValue,this.inputElement.selectionStart=t,void(this.inputElement.selectionEnd=t)}this.lastUnpreventedInputElementValue=this.inputElement.value,this.setValueInternal(parseFloat(this.inputElement.value.replace(",","."))),this.formattedValue=this.getDisplayValue(),this.emitValueChange()}emitValueChange(){this.value!==this.lastEmittedChangeValue&&(this.setValueInternal(this.getUnformattedValue()),this.lastEmittedChangeValue=this.value,this.valueChange.emit(this.value))}emitValueComplete(){this.lastEmittedCompleteValue!==this.value&&(this.valueComplete.emit(this.value),this.lastEmittedCompleteValue=this.value)}get inputTypeDefinition(){let t=null,i=0,e="0",n=!0;if("currency-euro"===this.profile?(t="eurozeichen",i=2):"percent"===this.profile&&(t="prozent",i=0),null!=this.precision&&(i=this.precision),i>0){e+=",";for(let t=0;t<i;t++)e+="0"}return null!=this.placeholder&&(e=this.placeholder),null!=this.uniticon&&(t=this.uniticon),null!=this.thousandseparator&&(n=this.thousandseparator),{icon:t,placeholder:e,decimalDigits:i,thousandsSeparator:n}}getDisplayValue(t=null){return h(null!=t?t:this.value,this.inputTypeDefinition.decimalDigits,this.inputTypeDefinition.thousandsSeparator)}isClearButtonVisible(){return this.inputFocused&&null!=this.formattedValue}render(){return this.readonly?e("div",null,e(c,{text:this.formattedValue,label:this.label,kisynced:this.kisynced}),e(a,{icon:this.inputTypeDefinition.icon})):e(n,null,this.renderInput())}renderInput(){var t,i,n,s;const o=(null===(t=this.errormessage)||void 0===t?void 0:t.length)>0||this.error,r=this.inputTypeDefinition,h=null!=this.value&&!isNaN(this.value);return e("label",null,e("ds-input-label",{disabled:this.disabled,label:this.label,kisynced:this.kisynced}),e(u,{active:this.inputFocused,error:o,required:this.required,requirementFulfilled:h,disabled:this.disabled,title:null===(i=this.value)||void 0===i?void 0:i.toString()},e("div",{class:"input-container"},e("input",{id:l.createId(this.self,"control"),ref:t=>this.inputElement=t,onKeyUp:t=>this.onInputKeyUp(t),onInput:()=>this.onInput(),onFocus:()=>this.onInputFocused(),onBlur:()=>this.onInputBlurred(),type:"text",inputMode:"numeric",pattern:"[0-9]*",value:this.inputFocused?null===(s=null===(n=this.value)||void 0===n?void 0:n.toString())||void 0===s?void 0:s.replace(".",","):this.formattedValue,placeholder:r.placeholder,class:{animatable:null==r.icon,"clear-button-visible":this.isClearButtonVisible()},lang:"de-DE",disabled:this.disabled}),this.renderIcon()),e(p,{text:this.errormessage,show:this.inputFocused,rightAligned:!0})),e("ds-required-hint",{required:this.required,fulfilled:h}))}renderNoIconSpecified(){return e("ds-function-icon-button",{id:l.createId(this.self,"clear-button"),unfocusable:!0,class:{"clear-button":!0,animatable:!0,visible:!0,"transition-show":this.isClearButtonVisible()},onPointerDown:()=>this.clearInput()},e("ds-icon",{icon:"schliessen-input",size:16}))}renderIconSpecified(){const t=this.inputTypeDefinition.icon;return e("div",{class:"right-icon"},this.isClearButtonVisible()?e("ds-function-icon-button",{id:l.createId(this.self,"clear-button"),unfocusable:!0,class:{"clear-button":!0,visible:!0},onPointerDown:()=>this.clearInput()},e("ds-icon",{icon:"schliessen-input",size:16})):""!=t?e("ds-icon",{class:{"type-icon":!0},icon:t,color:"gold",size:16}):null)}renderIcon(){return null==this.inputTypeDefinition.icon?this.renderNoIconSpecified():this.renderIconSpecified()}get self(){return s(this)}static get watchers(){return{value:["valueChanged"]}}};d.style=':host{display:block}:host:host([hidden]){display:none !important}:host:host([label]:not([label=""])){--ds-info-button-offset-y:24px}:host label{display:block}:host label>.container{position:relative;top:0;left:0;display:flex;height:38px;border-radius:4px;border:1px solid #c1c1c1;background-color:#ffffff;box-sizing:border-box;align-items:center}:host label>.container.required-outline{border-color:#e8b50e}:host label>.container.requirement-fulfilled{border-color:#c1c1c1}:host label>.container.red-outline{border-color:#be1413}:host label>.container.disabled-outline{border-color:#ebebeb}:host label>.container.active{border-color:#4c4c4c}:host label>.container .input-container{display:flex;width:100%;align-items:center;overflow:hidden}:host label>.container .input-container input{height:22px;margin:8px 0 8px 8px;border:none;outline:none;font-family:"Helvetica Neue", "Helvetica Neue LT W01";font-size:16px;line-height:24px;letter-spacing:0.02px;color:#4c4c4c;width:1px;flex-grow:1}:host label>.container .input-container input::placeholder{color:#c1c1c1}:host label>.container .input-container input:disabled{background-color:#ffffff;color:#c1c1c1}:host label>.container .input-container input.animatable{transform:translateX(20px);transition:transform 300ms ease-in-out}:host label>.container .input-container input.animatable.clear-button-visible{transform:translateX(0px)}:host label>.container .input-container .clear-button{visibility:hidden}:host label>.container .input-container .clear-button.visible{visibility:visible}:host label>.container .input-container .clear-button.animatable{width:28px;transform:translateX(28px);transition:transform 300ms ease-in-out}:host label>.container .input-container .clear-button.animatable.transition-show{transform:translateX(0px)}:host input{height:22px;margin:8px 0 8px 8px;border:none;outline:none;font-family:"Helvetica Neue", "Helvetica Neue LT W01";font-size:16px;line-height:24px;letter-spacing:0.02px;color:#4c4c4c;width:1px;flex-grow:1;text-align:right}:host input::placeholder{color:#c1c1c1}:host input:disabled{background-color:#ffffff;color:#c1c1c1}:host input::-webkit-outer-spin-button,:host input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}:host input[type=number]{-moz-appearance:textfield}.right-icon{width:28px;display:flex;align-items:center}.right-icon .clear-button{visibility:hidden}.right-icon .clear-button.visible{visibility:visible}.right-icon .type-icon{padding:6px}';export{d as ds_number_input}